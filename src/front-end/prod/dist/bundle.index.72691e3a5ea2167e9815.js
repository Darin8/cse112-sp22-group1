(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(){let t=[],e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length;for(let o=0;o<30;o++)t.push(e.charAt(Math.floor(Math.random()*n)));return t.join("")}t.d({},{ue:()=>Mt,X3:()=>Ft,zm:()=>qt,BJ:()=>_t,Fs:()=>St,mx:()=>Et,CO:()=>Rt,FK:()=>Wt,oT:()=>$t,nv:()=>Nt,Lu:()=>Pt,Dh:()=>jt,HQ:()=>Ct});let n={},o={},s={},i={};function r(t,e,n,o){let s=t,l=s.getTime()===i.startDate.getTime()?new Date(s.getFullYear(),s.getMonth(),s.getUTCDate()):new Date(s.getFullYear(),s.getMonth(),1),a=s.getMonth()===e.getMonth()&&s.getFullYear()===e.getFullYear()?e:new Date(s.getFullYear(),s.getMonth()+1,0);w(n.id,[],[],l,a,!1,((t,i)=>{if(null===t)if(s>e)o([]);else{s.getDate()!==new Date(s.getFullYear(),s.getMonth()+1,0).getDate()&&(s=new Date(s.getFullYear(),s.getMonth()+1,0));let t=new Date(s);t.setMonth(s.getMonth()+1),s.getDate()!==t.getDate()?t.setDate(0):t.getDate()!==new Date(t.getFullYear(),t.getMonth()+1,0).getDate()&&(t=new Date(t.getFullYear(),t.getMonth()+1,0)),r(t,e,n,(t=>{t.splice(0,0,{id:i.id,content:[],monthlyLog:i.id}),o(t)}))}else console.log(t)}))}function l(t,n,o,s,l,a){t.get("0000").then((r=>{let a=e(),c=[];for(Array.prototype.push.apply(c,r.dailyLogs),Array.prototype.push.apply(c,r.monthlyLogs),Array.prototype.push.apply(c,r.futureLogs),Array.prototype.push.apply(c,r.collections),Array.prototype.push.apply(c,r.trackers),Array.prototype.push.apply(c,r.textBlocks),Array.prototype.push.apply(c,r.tasks),Array.prototype.push.apply(c,r.events),Array.prototype.push.apply(c,r.signifiers),Array.prototype.push.apply(c,r.imageBlocks),Array.prototype.push.apply(c,r.audioBlocks);c.filter((t=>t.id===a)).length>0;)a=e();return i={id:a,objectType:"futureLog",startDate:n,endDate:o,months:s,trackers:l},r.futureLogs.push(i),r.index.contents.push(i.id),t.put({_id:"0000",_rev:r._rev,email:r.email,pwd:r.pwd,theme:r.theme,index:r.index,dailyLogs:r.dailyLogs,monthlyLogs:r.monthlyLogs,futureLogs:r.futureLogs,collections:r.collections,trackers:r.trackers,imageBlocks:r.imageBlocks,audioBlocks:r.audioBlocks,textBlocks:r.textBlocks,tasks:r.tasks,events:r.events,signifiers:r.signifiers})})).then((e=>{console.log(e),e.ok?(console.log(new Date(i.startDate.getTime())),console.log(new Date(i.endDate.getTime())),r(new Date(i.startDate.getTime()),new Date(i.endDate.getTime()),i,(e=>{t.get("0000").then((n=>{i.months=e,n.futureLogs[n.futureLogs.length-1]=i,t.put({_id:"0000",_rev:n._rev,email:n.email,pwd:n.pwd,theme:n.theme,index:n.index,dailyLogs:n.dailyLogs,monthlyLogs:n.monthlyLogs,futureLogs:n.futureLogs,collections:n.collections,trackers:n.trackers,imageBlocks:n.imageBlocks,audioBlocks:n.audioBlocks,textBlocks:n.textBlocks,tasks:n.tasks,events:n.events,signifiers:n.signifiers},((t,e)=>{t?a(t,null):e.ok&&a(null,i)}))}))}))):console.log(e)})).catch((t=>{a(t,null)}))}let a={};function c(t,n,s,i,r){let l=new Date(n.getFullYear(),n.getMonth(),t);t>s?r([]):function(t,n,s,i,r,l){!function(t,n,s,i,r,l){t.get("0000",((a,c)=>{if(!a){let l=e(),a=[];for(Array.prototype.push.apply(a,c.dailyLogs),Array.prototype.push.apply(a,c.monthlyLogs),Array.prototype.push.apply(a,c.futureLogs),Array.prototype.push.apply(a,c.collections),Array.prototype.push.apply(a,c.trackers),Array.prototype.push.apply(a,c.textBlocks),Array.prototype.push.apply(a,c.tasks),Array.prototype.push.apply(a,c.events),Array.prototype.push.apply(a,c.signifiers),Array.prototype.push.apply(a,c.imageBlocks),Array.prototype.push.apply(a,c.audioBlocks);a.filter((t=>t.id===l)).length>0;)l=e();return o={id:l,objectType:"dailyLog",date:r,parent:n,content:s,trackers:i},c.dailyLogs.push(o),t.put({_id:"0000",_rev:c._rev,email:c.email,pwd:c.pwd,theme:c.theme,index:c.index,dailyLogs:c.dailyLogs,monthlyLogs:c.monthlyLogs,futureLogs:c.futureLogs,collections:c.collections,trackers:c.trackers,imageBlocks:c.imageBlocks,audioBlocks:c.audioBlocks,textBlocks:c.textBlocks,tasks:c.tasks,events:c.events,signifiers:c.signifiers})}l(a,null)})).then((t=>{t&&l(null,o)})).catch((t=>{l(t,null)}))}(f,t,[],[],i,((t,e)=>{l(t,e)}))}(i.id,0,0,l,0,((e,o)=>{null===e?c(t+1,n,s,i,(t=>{t.splice(0,0,{id:o.id,content:[],dailyLog:o.id}),r(t)})):console.log(e)}))}let d={},h={},p={};function u(t,e,n){console.log("deleteEvent"+e),t.get("0000",((o,s)=>{if(!o){let o=s.events.filter((t=>t.id===e)),i=null;o.length>0&&(i=o[0]),console.log(i);let r=[];Array.prototype.push.apply(r,s.textBlocks);let l=s.events.filter((t=>t.id!==e));return t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,trackers:s.trackers,collections:s.collections,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:s.tasks,events:l,signifiers:s.signifiers},((t,e)=>{t?n(t):(console.log(e),n(null))}))}n(o)}))}function g(t,e,n){t.get("0000",((o,s)=>{if(!o){let o=s.tasks.filter((t=>t.id!==e));return t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,trackers:s.trackers,collections:s.collections,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:o,events:s.events,signifiers:s.signifiers},((t,e)=>{t?n(t):(console.log(e),n(null))}))}n(o)}))}function y(t,e,n,o){B(((s,i)=>{if(null===s){let s=[];Array.prototype.push.apply(s,i.dailyLogs),Array.prototype.push.apply(s,i.monthlyLogs),Array.prototype.push.apply(s,i.futureLogs),Array.prototype.push.apply(s,i.trackers),Array.prototype.push.apply(s,i.collections);let r=s.filter((t=>t.id===e.parent))[0];if("dailyLog"===r.objectType){let t=r.content.filter((t=>t!==n));r.content=t}else if("monthlyLog"===r.objectType){for(let t=0;t<r.days.length;t++)if(r.days[t].content.includes(n)){let e=r.days[t].content.filter((t=>t!==n));r.days[t].content=e}}else if("futureLog"===r.objectType)for(let t=0;t<r.months.length;t++)if(r.months[t].content.includes(n)){let e=r.months[t].content.filter((t=>t!==n));r.months[t].content=e}let l=i.textBlocks.filter((t=>t.id!==n));return i.textBlocks=l,t.put({_id:"0000",_rev:i._rev,email:i.email,pwd:i.pwd,theme:i.theme,index:i.index,dailyLogs:i.dailyLogs,monthlyLogs:i.monthlyLogs,futureLogs:i.futureLogs,collections:i.collections,trackers:i.trackers,imageBlocks:i.imageBlocks,audioBlocks:i.audioBlocks,textBlocks:i.textBlocks,tasks:i.tasks,events:i.events,signifiers:i.signifiers}).then((t=>{console.log(t),o(null)})).catch((t=>{console.log(t),o(t)}))}console.log(s),o(s)}))}function m(t,e,n){B(((o,s)=>{if(null===o)return t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,trackers:s.trackers,collections:s.collections,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:e,tasks:s.tasks,events:s.events,signifiers:s.signifiers},((t,e)=>{t?(console.log(t),n(t)):n(e)}));console.log(o),n(o)}))}let f=new PouchDB("Users");function b(){!function(t,e){console.log("getting user"),t.get("0000",((t,e)=>{if(t)console.log("the user is broken in pouch"),n=t,console.log("updated user",n);else try{console.log("this is the user now",e),console.log("about to fetch"),fetch(`${api}/updateUser`,{headers:{"content-type":"application/json; charset=UTF-8",Origin:origin},body:JSON.stringify(e),method:"POST"}).then((t=>t.json())).then((t=>{console.log("fetch succesful"),console.log(t)}))}catch(t){console.log("there is an error when fetching"),console.log(t.text)}var n}))}(f)}function k(t,n,o,i,r,l){!function(t,n,o,i,r,l){t.get("0000",((a,c)=>{if(!a){console.log(c);let a=e(),d=[];for(Array.prototype.push.apply(d,c.dailyLogs),Array.prototype.push.apply(d,c.monthlyLogs),Array.prototype.push.apply(d,c.futureLogs),Array.prototype.push.apply(d,c.collections),Array.prototype.push.apply(d,c.trackers),Array.prototype.push.apply(d,c.textBlocks),Array.prototype.push.apply(d,c.tasks),Array.prototype.push.apply(d,c.events),Array.prototype.push.apply(d,c.signifiers),Array.prototype.push.apply(d,c.imageBlocks),Array.prototype.push.apply(d,c.audioBlocks);d.filter((t=>t.id===a)).length>0;)a=e();return s={id:a,objectType:"event",title:n,parent:o,date:i,signifier:r},c.events.push(s),t.put({_id:"0000",_rev:c._rev,email:c.email,pwd:c.pwd,theme:c.theme,index:c.index,dailyLogs:c.dailyLogs,monthlyLogs:c.monthlyLogs,futureLogs:c.futureLogs,collections:c.collections,trackers:c.trackers,imageBlocks:c.imageBlocks,audioBlocks:c.audioBlocks,textBlocks:c.textBlocks,tasks:c.tasks,events:c.events,signifiers:c.signifiers}).then((t=>{console.log(t)})).catch((t=>{l(t,null)}))}l(a,null)})).then((t=>{t.ok&&l(null,s)}))}(f,t,n,o,i,((t,e)=>{r&&b(),l(t,e)}))}function x(t,e,n,o,s,i){l(f,t,e,n,o,((t,e)=>{s&&b(),i(t,e)}))}function w(t,n,o,s,i,r,l){!function(t,n,o,s,i,r,l){t.get("0000",((r,c)=>{if(!r){let r=e(),l=[];for(Array.prototype.push.apply(l,c.dailyLogs),Array.prototype.push.apply(l,c.monthlyLogs),Array.prototype.push.apply(l,c.futureLogs),Array.prototype.push.apply(l,c.collections),Array.prototype.push.apply(l,c.trackers),Array.prototype.push.apply(l,c.textBlocks),Array.prototype.push.apply(l,c.tasks),Array.prototype.push.apply(l,c.events),Array.prototype.push.apply(l,c.signifiers),Array.prototype.push.apply(l,c.imageBlocks),Array.prototype.push.apply(l,c.audioBlocks);l.filter((t=>t.id===r)).length>0;)r=e();return a={id:r,objectType:"monthlyLog",date:i,parent:n,days:o,trackers:s},c.monthlyLogs.push(a),t.put({_id:"0000",_rev:c._rev,email:c.email,pwd:c.pwd,theme:c.theme,index:c.index,dailyLogs:c.dailyLogs,monthlyLogs:c.monthlyLogs,futureLogs:c.futureLogs,collections:c.collections,trackers:c.trackers,imageBlocks:c.imageBlocks,audioBlocks:c.audioBlocks,textBlocks:c.textBlocks,tasks:c.tasks,events:c.events,signifiers:c.signifiers})}l(r,null)})).then((e=>{e?c(i.getUTCDate(),new Date(a.date),r.getUTCDate(),a,(e=>{a.days=e,t.get("0000",((e,n)=>{e?l(e,null):(n.monthlyLogs[n.monthlyLogs.length-1]=a,t.put({_id:"0000",_rev:n._rev,email:n.email,pwd:n.pwd,theme:n.theme,index:n.index,dailyLogs:n.dailyLogs,monthlyLogs:n.monthlyLogs,futureLogs:n.futureLogs,collections:n.collections,trackers:n.trackers,imageBlocks:n.imageBlocks,audioBlocks:n.audioBlocks,textBlocks:n.textBlocks,tasks:n.tasks,events:n.events,signifiers:n.signifiers}).then((t=>{t&&l(null,a)})).catch((t=>{l(t,null)})))}))})):console.log(e)})).catch((t=>{l(t,null)}))}(f,t,n,o,s,i,((t,e)=>{r&&b(),l(t,e)}))}function v(t,n,o,s,i,r){!function(t,n,o,s,i,r){t.get("0000",((l,a)=>{if(!l){console.log(a);let l=e(),c=[];for(Array.prototype.push.apply(c,a.dailyLogs),Array.prototype.push.apply(c,a.monthlyLogs),Array.prototype.push.apply(c,a.futureLogs),Array.prototype.push.apply(c,a.collections),Array.prototype.push.apply(c,a.trackers),Array.prototype.push.apply(c,a.textBlocks),Array.prototype.push.apply(c,a.tasks),Array.prototype.push.apply(c,a.events),Array.prototype.push.apply(c,a.signifiers),Array.prototype.push.apply(c,a.imageBlocks),Array.prototype.push.apply(c,a.audioBlocks);c.filter((t=>t.id===l)).length>0;)l=e();return d={id:l,objectType:"task",parent:n,text:o,complete:s,signifier:i},a.tasks.push(d),t.put({_id:"0000",_rev:a._rev,email:a.email,pwd:a.pwd,theme:a.theme,index:a.index,dailyLogs:a.dailyLogs,monthlyLogs:a.monthlyLogs,futureLogs:a.futureLogs,collections:a.collections,trackers:a.trackers,imageBlocks:a.imageBlocks,audioBlocks:a.audioBlocks,textBlocks:a.textBlocks,tasks:a.tasks,events:a.events,signifiers:a.signifiers}).then((t=>{console.log(t)})).catch((t=>{console.log(t),r(t,null)}))}r(l,null)})).then((t=>{console.log(t),r(null,d)}))}(f,t,n,o,s,((t,e)=>{i&&b(),r(t,e)}))}function L(t,n,o,s,i){!function(t,n,o,s,i){console.log("making tracjer"),t.get("0000",((r,l)=>{if(!r){let r=e(),a=[];for(Array.prototype.push.apply(a,l.dailyLogs),Array.prototype.push.apply(a,l.monthlyLogs),Array.prototype.push.apply(a,l.futureLogs),Array.prototype.push.apply(a,l.collections),Array.prototype.push.apply(a,l.trackers),Array.prototype.push.apply(a,l.textBlocks),Array.prototype.push.apply(a,l.tasks),Array.prototype.push.apply(a,l.events),Array.prototype.push.apply(a,l.signifiers),Array.prototype.push.apply(a,l.imageBlocks),Array.prototype.push.apply(a,l.audioBlocks);a.filter((t=>t.id===r)).length>0;)r=e();p={id:r,objectType:"tracker",title:n,content:o,parent:s},console.log(a),console.log(s);let c=a.filter((t=>t.id===s));return console.log(c),c[0].trackers.push(p.id),l.trackers.push(p),t.put({_id:"0000",_rev:l._rev,email:l.email,pwd:l.pwd,theme:l.theme,index:l.index,dailyLogs:l.dailyLogs,monthlyLogs:l.monthlyLogs,futureLogs:l.futureLogs,collections:l.collections,trackers:l.trackers,imageBlocks:l.imageBlocks,audioBlocks:l.audioBlocks,textBlocks:l.textBlocks,tasks:l.tasks,events:l.events,signifiers:l.signifiers}).then((t=>{console.log(t)})).catch((t=>{console.log(t),i(t,null)}))}i(r,null)})).then((t=>{console.log(t),console.log(p),i(null,p)}))}(f,t,n,o,((t,e)=>{s&&b(),i(t,e)}))}function B(t){!function(t,e){t.get("0000",((t,n)=>{t?e(t,null):e(null,n)}))}(f,((e,n)=>{console.log(e),console.log(n),t(e,n)}))}function A(t,e,n){u(f,t.id,(t=>{e&&b(),n(t)}))}function T(t,e,n){u(f,t,(t=>{e&&b(),n(t)}))}function I(t,e,n){g(f,t.id,(t=>{e&&b(),n(t)}))}function D(t,e,n){g(f,t,(t=>{e&&b(),n(t)}))}function E(t,e,n){!function(t,e,n){console.log(e),t.get("0000",((o,s)=>{if(!o){let o=s.events.filter((t=>t.id!==e.id));return o.push(e),t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,trackers:s.trackers,collections:s.collections,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:s.tasks,events:o,signifiers:s.signifiers},((t,e)=>{t?(console.log(t),n(t)):n(e)}))}n(o)}))}(f,t,(t=>{e&&b(),n(t)}))}function S(t,e,n){!function(t,e,n){console.log("task when calling update task",e),t.get("0000",((o,s)=>{if(!o){let o=s.tasks.filter((t=>t.id!==e.id));return o.push(e),console.log("taskArr is, ",o),t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,trackers:s.trackers,collections:s.collections,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:o,events:s.events,signifiers:s.signifiers},((t,e)=>{n(t||e)}))}n(o)}))}(f,t,(t=>{e&&b(),n(t)}))}let M={index:[{title:"New Future Log",listener:()=>{Ft.setKind("futureLog"),Ft.show()}},{title:"New Collection",listener:()=>{Ft.setKind("collection"),Ft.show()}}],futureLog:[{title:"New Monthly Log",listener:()=>{Ft.setKind("monthlyLog"),Ft.show()}},{title:"New Tracker",listener:()=>{Ft.setKind("tracker"),Ft.show()}}],monthlyLog:[{title:"New Daily Log",listener:()=>{Ft.setKind("dailyLog"),Ft.show()}},{title:"New Tracker",listener:()=>{Ft.setKind("tracker"),Ft.show()}}],textEditor:[{title:"New Block",listener:()=>{}},{title:"New Image",listener:()=>{}}]};function F(t,e){void 0!==M[qt.objectType]&&(Mt.setPosition(t,e),Mt.fillDropdown(M[qt.objectType]))}function C(t,e){let n=1,o=setInterval((()=>{let s=!1;n<=.1&&(clearInterval(o),t.style.display="none",s=!0),t.style.opacity=n,n-=.1*n,s&&e()}),10)}function R(t,e){let n=!1,o=.1;t.style.opacity=o,t.style.display="block";let s=setInterval((()=>{o>=1&&(clearInterval(s),n=!0),t.style.opacity=o,o+=.1*o,n&&e()}),10)}const q={};let H="";q.setState=function(t,e){_t(t),H=t,setTimeout((()=>{for(document.getElementById("trackerWrapper").childNodes.length>0&&document.getElementById("trackerWrapper").removeChild(document.getElementById("trackerWrapper").childNodes[0]);document.getElementById("contentWrapper").childNodes.length>0;)document.getElementById("contentWrapper").removeChild(document.getElementById("contentWrapper").childNodes[0]);document.querySelector("body").className="";let n=document.querySelector("body"),o=Et.shadowRoot.querySelectorAll("button");C(n,(()=>{B((s=>{console.log(s),null===H||"#index"===H||""===H?Pt(o):H.includes("#dailyLog")?$t(o,t):H.includes("#monthlyLog")?jt(o,t):H.includes("#futureLog")?Nt(o,t):H.includes("#collection")&&Wt(o,t),e||history.pushState({page:Rt},"",Ct),R(n,(()=>{console.log("unfading the content")}))}))}))}),150)};class _ extends HTMLElement{constructor(t,e,n=1){super(),this.currentHeight=5,this.item=e,this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`\n\t\t<style>\n            :host {\n\t\t\t\tfont-family:"SF-Pro";\n\n\t\t\t\tuser-select: none; \n\t\t\t\t-webkit-user-select: none;\n\t\t\t\t-moz-user-select: none; \n\t\t\t\t-khtml-user-select: none; \n\t\t\t\t-ms-user-select: none;\n            }\n\n\t\t\t.noteContainer {\n\t\t\t\tmargin-top: 7px;\n\t\t\t\tmargin-bottom: 7px;\n\t\t\t\tmargin-left: 87px;\n\t\t\t\tdisplay: list-item;\n\t\t\t\tlist-style-type: disc;\n\t\t\t\tlist-style-position: outside;\n\t\t\t}\n\n\t\t\t.eventContainer {\n\t\t\t\tmargin-top: 7px;\n\t\t\t\tmargin-bottom: 7px;\n\t\t\t\tmargin-left: 87px;\n\t\t\t\tdisplay: list-item;\n\t\t\t\tlist-style-type: circle;\n\t\t\t\tlist-style-position: outside;\n\t\t\t}\n\t\t\t\n\t\t\t#wrapper{\n\t\t\t\tpadding-bottom: 0;\n\t\t\t\twidth: calc(100% - 70px);\n\t\t\t}\n\n\t\t\t#title{\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tfont-family: "SF-Pro";\n\t\t\t\tmargin-left: 7.5px;\n\t\t\t\tfont-size: calc(20pt - ${2*n}pt);\n\t\t\t\tfont-weight: calc(900 - ${200*n});\n\t\t\t\tletter-spacing: calc(1.2px - ${.35*n}px);\n\t\t\t\tcursor: pointer;\n\t\t\t\tborder-bottom: 2px solid var(--content-foreground-color); /*rgba(0,0,0,0.4);*/\n\t\t\t\ttransition: 0.2s;\n\t\t\t}\n\n\t\t\t#title:hover{\n\t\t\t\tborder-bottom: 2px solid var(--content-foreground-color); /*rgba(0,0,0,0.9);*/\n\t\t\t\ttransition: 0.2s;\n\t\t\t}\n\n            #arrow {\n                width: 12px;\n                height: 12px;\n\t\t\t\tbackground-color: rgba(0,0,0,0);\n                border: none;\n\t\t\t\tcursor: pointer;\n            }\n\n            #arrow img {\n                max-width: calc(22px - ${3*n}px);\n                max-height: calc(22px - ${3*n}px);\n\n                filter: var(--icon-filter);\n            }\n            :not(.closed) #arrow img {\n                transform: rotate(0deg);\n                transition: transform 0.2s;\n            }\n\n            .closed #arrow img {\n                transform: rotate(90deg);\n                transition: 0.2s;\n            }\n\n\t\t\t:not(.closed) #contentWrapper{\n\t\t\t\tmax-height: 0;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttransition: max-height 0.2s ease-out;\n\t\t\t}\n\n\t\t\t.closed #contentWrapper{\n\t\t\t\tmax-height: auto;\n\t\t\t\ttransition: max-height 0.2s ease-out;\n\t\t\t}\n\n            #contentWrapper {\n                position: relative;\n                left: 3em;\n                width: calc(100% - ${3*n}em);\n                overflow-x: none;\n            }\n\n\t\t\t.singleItemWrapper{\n\t\t\t\tborder-top: 1px solid var(--border-color);\n\t\t\t}\n\n\t\t\t#editorIcons{\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: inline;\n\t\t\t\tfloat: left;\n\t\t\t\ttop: calc(17.5px - ${Number(n)}px);\n\t\t\t\tvertical-align: top;\n\t\t\t}\n\t\t\t\n\t\t\t#editorIcons img{\n\t\t\t\tmargin-right: 7px;\n\t\t\t\theight: 15px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tfilter: var(--icon-filter);\n\t\t\t}\n\t\t\t.unfocusedIcons{\n\t\t\t\topacity: 0.5;\n\t\t\t\ttransition: 0.2s;\n\t\t\t}\n\t\n\t\t\t#editorIcons img:hover{\n\t\t\t\topacity: 0.8;\n\t\t\t\ttransition: opacity 0.2s;\n\t\t\t}\n\t\t</style>\n\t\t<div id="editorIcons" class="paragraphIcons"><img src="../public/resources/plusIcon.png" class="unfocusedIcons" id="plus"/><img src="../public/resources/sixDotIcon.png" class="unfocusedIcons" id="more"/></div>\n        <div id="wrapper">\n\t\t\t<div id="titleWrapper" class="${n>1?"singleItemWrapper":""}">\n\t\t\t\t<h1 id="title"></h1>\n\t\t\t\t<button id="arrow"><img src="../public/resources/right-chevron.png" /></button>\n\t\t\t</div>\n            <div id="contentWrapper"></div>\n\n        `,this.button=this.shadowRoot.getElementById("arrow"),this.wrapper=this.shadowRoot.getElementById("wrapper"),this.contentWrapper=this.shadowRoot.getElementById("contentWrapper"),this.header=this.shadowRoot.querySelector("h1"),this.title=t,this.titleWrapper=this.shadowRoot.querySelector("#titleWrapper"),this.plus=this.shadowRoot.getElementById("plus"),this.more=this.shadowRoot.getElementById("more")}connectedCallback(){this.plus.onclick=()=>{let t=this.plus.getBoundingClientRect().top+this.plus.offsetHeight+105>window.innerHeight?-105:this.plus.offsetHeight+10;F(this.plus.getBoundingClientRect().top+document.body.scrollTop+t,this.plus.getBoundingClientRect().left)},this.more.onclick=()=>{if("index"==qt.objectType){Mt.fillDropdown([{title:"Delete",listener:()=>{Ft.setKind("futureLog"),Ft.show(),Mt.hide()}}]);let t=this.more.getBoundingClientRect().top+this.more.offsetHeight+105>window.innerHeight?-105:this.more.offsetHeight+10;Mt.setPosition(this.more.getBoundingClientRect().top+document.body.scrollTop+t,this.more.getBoundingClientRect().left)}},this.removeAttribute("closed"),this.button.addEventListener("click",(()=>{this.toggleItems()})),this.header.addEventListener("click",(()=>{console.log(this.item),this.navigateToObject()}))}get title(){return this.header.innerText}set title(t){this.header.innerText=t}get closed(){return this.wrapper.hasAttribute("closed")}set closed(t){t?this.hide():this.display()}navigateToObject(){q.setState(`#${this.item.objectType}~${this.item.id}`,!1),Et.open=!1}display(){this.wrapper.classList.toggle("closed",!0)}hide(){this.wrapper.classList.toggle("closed",!1)}toggleItems(){this.wrapper.classList.toggle("closed"),this.wrapper.classList.contains("closed")?this.display():this.hide()}}window.customElements.define("drop-down",_);const P="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,N=Boolean(P&&document.createElement("div").attachShadow({mode:"open"}).getSelection),j=window.ShadyDOM&&window.ShadyDOM.inUse,$=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,W=!P||j||!N&&!$,Y=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,z="-shadow-selectionchange",O=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function U(t,e,n){const o=e.childNodes||e.children;if(!o)return e;for(let e=0;e<o.length;++e){const i=o[n?e:o.length-1-e];if(s=i,O.includes(s.nodeType)&&t.containsNode(i,!0)){if(t.containsNode(i,!1))return i;if(!Y.exec(i.localName||""))return U(t,i,n)}}var s;return e}let J={node:null,offset:-1};function K(t,e,n){const o=e;for(;(e=X(e,n))&&e.contains(o););return!!e&&e instanceof Element&&t.containsNode(e,!0)}function X(t,e){if(!e)return t.previousSibling||t.parentNode||null;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}!function(){if(N||W)return document.addEventListener("selectionchange",(t=>{document.dispatchEvent(new CustomEvent(z))})),()=>{};let t=!1;document.addEventListener("selectionchange",(e=>{if(t)return;t=!0;const n=window.getSelection();if("Caret"===n.type){const t=function(t,e){const n=[],o=t=>{for(let e=0;e<t.length;++e)t[e].shadowRoot&&n.push(t[e].shadowRoot)};for(e.shadowRoot&&n.push(e.shadowRoot),o(e.childNodes);n.length;){const e=n.shift();for(let n=0;n<e.childNodes.length;++n)if(t.containsNode(e.childNodes[n],!0))return e;o(e.querySelectorAll("*"))}return null}(n,n.anchorNode);if(t instanceof window.ShadowRoot){const e=G(t);if(e){const t=e.startContainer,n=e.startOffset;J={node:t,offset:n}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame((()=>{t=!1}))}))}();const V=new Map;function G(t){if(W){const e=document.getSelection();return e.containsNode(t,!0)?e.getRangeAt(0):null}if(N){const e=t.getSelection();return e.rangeCount?e.getRangeAt(0):null}const e=V.get(t);if(e)return e;const n=function(t){const e=window.getSelection();if("None"===e.type)return{range:null,type:"none"};if("Caret"!==e.type&&"Range"!==e.type)throw new TypeError("unexpected type: "+e.type);const n=U(e,t,!0);if(n===t)return{range:null,mode:"none"};const o=document.createRange();let s,i=null;if("Range"===e.type&&(i=U(e,t,!1),s=function(t,e,n){if("Range"!==t.type)return;const o=()=>t.toString().length,s=o();let i;return t.modify("extend","forward","character"),i=o(),i>s||K(t,n,!0)?(t.modify("extend","backward","character"),!0):i<s||!t.containsNode(e)?(t.modify("extend","backward","character"),!1):(t.modify("extend","backward","character"),i=o(),i>s||K(t,e,!1)?(t.modify("extend","forward","character"),!1):i<s||!t.containsNode(n)?(t.modify("extend","forward","character"),!0):void 0)}(e,n,i),void 0===s))return o.setStart(n,0),o.setEnd(i,i.length),{range:o,mode:"all"};const r=e.toString().length;let l=0,a=0;if(null===i);else if(i.nodeType===Node.TEXT_NODE){const t=i.textContent,n=i.nextSibling;for(let n=t.length-1;n>=0;--n)if(i.splitText(n),e.toString().length!==r){a=n+1;break}for(i.insertData(i.length,t.substr(i.length));i.nextSibling!==n;)i.nextSibling.remove()}if(n.nodeType===Node.TEXT_NODE){n!==i&&(n.appendData("?"),e.collapseToStart(),e.modify("extend","right","character"));const t=n.textContent,o=n.nextSibling;for(let o=n===i?a:t.length-1;o>=0;--o)if(n.splitText(o),""===e.toString()){l=o;break}for(n.insertData(n.length,t.substr(n.length));n.nextSibling!==o;)n.nextSibling.remove();n!==i&&n.deleteData(n.length-1,1),null===i&&(i=n,a=l)}else null===i&&(i=n);return 1===r&&J&&J.node===n&&J.offset>l&&s&&(s=!1),!0===s?(e.collapse(n,l),e.extend(i,a)):!1===s?(e.collapse(i,a),e.extend(n,l)):e.setPosition(n,l),o.setStart(n,l),o.setEnd(i,a),{range:o,mode:"normal"}}(t);return V.set(t,n.range),window.setTimeout((()=>{V.delete(t)}),0),n.range}const Q=(t,e)=>{Array.isArray(e)?e.forEach((e=>Q(t,e))):"TEMPLATE"===t.tagName?t.content.appendChild(e.nodeType?e:document.createTextNode(e)):t.appendChild(e.nodeType?e:document.createTextNode(e))},Z=(t,e,...n)=>{const o=document.createElement(t);return Object.entries(e||{}).forEach((([t,e])=>{t.startsWith("on")&&t.toLocaleLowerCase()in window?o.addEventListener(t.toLowerCase().substring(2),e):o.setAttribute(t,e.toString())})),n.forEach((t=>{Q(o,t)})),o},tt=["Control","Alt","CapsLock","Escape","PageUp","PageDown","End","Home","PrintScreen","Insert","Delete","Backspace","Tab","Enter","Meta","ArrowTop","ArrowBottom","ArrowRight","ArrowLeft","Shift"," "];function et(t,e){return"3"===t||"5"===t||"8"===t||"10"===t?30:"1"===t&&function(t){return t%100==0?t%400==0:t%4==0}(e)?29:"1"===t?28:31}function nt(t,e,n){for(let o=0;o<e.length;o++)56517===e.charCodeAt(o)&&(n?t.dateSetter=!0:(t.hashPressed=!0,t.atPressed=!1)),56688===e.charCodeAt(o)&&(n?t.timeSetter=!0:(t.atPressed=!0,t.hashPressed=!1))}let ot=Z("template",null,Z("link",{type:"text/css",rel:"stylesheet",href:"./block.css"}),Z("div",{id:"editorIcons",class:"paragraphIcons"},Z("img",{src:"../public/resources/plusIcon.png",class:"unfocusedIcons",id:"plus"}),Z("img",{src:"../public/resources/sixDotIcon.png",class:"unfocusedIcons",id:"more"}),Z("div",{id:"signifier"})),Z("div",{id:"checkerContainer",checked:""},Z("div",{id:"taskChecker"})),Z("div",{id:"textBlock",contentEditable:"true",ondrop:()=>!1,placeholder:'Type "/" to create a block'}));class st extends HTMLElement{constructor(t,e,n,o){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ot.content.cloneNode(!0)),this.characterIndex=0,this.kind="paragraph",this.initialHeight=3,this.item=e,this.controller=t,this.shadowRoot.getElementById("textBlock").classList.add("unstylized"),this.currentBlock=null,this.checkBox=this.shadowRoot.getElementById("checkerContainer"),this.checkBox.style.display="none",this.currentPointerSpot=0,this.editorIcons=this.shadowRoot.getElementById("editorIcons"),this.currentPointerHeight=2,this.controller.creatingFromBullet.isTrue&&("note"===this.controller.creatingFromBullet.kind?this.setupNote():"event"===this.controller.creatingFromBullet.kind?this.setupEvent():this.setupTask()),this.tabLevel=t.currentTabLevel,this.atPressed=!1,this.hashPressed=!1,this.timeSetter=!1,this.dateSetter=!1,this.eventDelete=!0,this.signifier=n,this.signifierIcon=this.shadowRoot.getElementById("signifier"),this.signifierIcon.innerHTML=this.signifier.symbol,this.plus=this.shadowRoot.getElementById("plus"),this.more=this.shadowRoot.getElementById("more"),this.setupTabLevel(),setTimeout((()=>{o(!0)}),30)}setCurrentSpot(){let t=this.shadowRoot.getElementById("textBlock"),e=G(this.shadowRoot);if(null===e){let t=20*this.tabLevel;this.currentPointerSpot=t+10,this.currentPointerHeight=this.initialHeight}else{let n=20*this.tabLevel,o=e.cloneRange();o.selectNodeContents(t),o.setEnd(e.endContainer,e.endOffset),this.atPressed=!1,this.hashPressed=!1,nt(this,t.innerText.slice(0,e.endOffset),!1),this.characterIndex=e.endOffset,this.currentPointerSpot=void 0===e.getClientRects()[0]?n+10:e.getClientRects()[0].x,this.currentPointerHeight=void 0===e.getClientRects()[0]?this.initialHeight:e.getClientRects()[0].y-t.getBoundingClientRect().top}}moveToSpot(t,e){let n=t,o=this.shadowRoot.getElementById("textBlock");if(o.childNodes.length>0){this.controller.resetPosition||(n=this.currentPointerSpot),o.focus();let t=G(this.shadowRoot);o.blur(),console.log(n),console.log(n),setTimeout((()=>{let s=0;e&&(s=o.textContent.length),t.setStart(o.childNodes[0],s);let i=t.getClientRects()[0].x,r=s,l=0;for(n=Math.floor(n);l<1e3;){s=e?s>0?s-1:s:s<o.textContent.length?s+1:s,t.setStart(o.childNodes[0],s),t.collapse(!0);let a=t.getClientRects()[0].x;if(Math.abs(Math.floor(i)-n)<=Math.abs(Math.floor(a)-n)){t.setStart(o.childNodes[0],r);break}i=a,r=s,l+=1}t.collapse(!0),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),o.focus()}),.01)}else o.focus()}setupHeader1(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.controller.creatingFromBullet={isTrue:!1,kind:""},this.kind="h1",this.initialHeight=0,t.setAttribute("placeholder","Header 1"),t.classList.add("header1"),this.editorIcons.classList.add("header1Icons"),t.innerHTML="",this.checkBox.style.display="none"}setupHeader2(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.controller.creatingFromBullet={isTrue:!1,kind:""},this.kind="h2",this.initialHeight=0,t.setAttribute("placeholder","Header 2"),t.classList.add("header2"),this.editorIcons.classList.add("header2Icons"),t.innerHTML="",this.checkBox.style.display="none"}setupHeader3(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.controller.creatingFromBullet={isTrue:!1,kind:""},this.kind="h3",this.initialHeight=0,t.setAttribute("placeholder","Header 3"),t.classList.add("header3"),this.editorIcons.classList.add("header3Icons"),t.innerHTML="",this.checkBox.style.display="none"}setupNote(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.kind="note",this.controller.creatingFromBullet={isTrue:!0,kind:this.kind},this.initialHeight=3,t.setAttribute("placeholder","Note"),this.classList.add("noteContainer"),this.editorIcons.classList.add("noteIcons"),t.classList.add("note"),t.innerHTML="",this.checkBox.style.display="none"}setupEvent(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.kind="event",this.controller.creatingFromBullet={isTrue:!0,kind:this.kind},this.initialHeight=3,t.setAttribute("placeholder","Event:");let e="";this.timeSetter?this.dateSetter||(e=`${e} use # for weekdays or dates MM/DD/YY`):(e=`${e} use @ for time HH:MM`,this.dateSetter||(e=`${e} and # for weekdays or dates MM/DD/YY`)),t.setAttribute("dateFiller",e),this.classList.add("eventContainer"),this.editorIcons.classList.add("noteIcons"),t.classList.add("note"),t.classList.add("eventNodateFocused"),t.innerHTML="",this.checkBox.style.display="none"}setupTask(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.kind="task",this.controller.creatingFromBullet={isTrue:!0,kind:this.kind},this.initialHeight=3,t.classList.add("task"),t.setAttribute("placeholder","Task"),t.innerHTML="",this.editorIcons.classList.add("paragraphIcons"),this.checkBox.style.display="inline"}removeStyles(){let t=this.shadowRoot.getElementById("textBlock");for(;this.editorIcons.classList.length>0;)this.editorIcons.classList.remove(this.editorIcons.classList[0]);for(;t.classList.length>0;)t.classList.remove(t.classList[0]);for(;this.classList.length>0;)this.classList.remove(this.classList[0]);this.kind="paragraph",this.initialHeight=3,t.classList.add("unstylized"),t.setAttribute("placeholder",'Type "/" to create a block'),t.innerHTML="",this.editorIcons.classList.add("paragraphIcons"),this.controller.creatingFromBullet={isTrue:!1,kind:""},this.checkBox.style.display="none"}setupTabLevel(){this.style.position="relative";let t=20*this.tabLevel;this.style.left=t+"px",this.controller.currentTabLevel=this.tabLevel,this.setCurrentSpot()}setupSignifier(t){this.signifier=t,this.signifierIcon.innerHTML=t.symbol}connectedCallback(){let t=this.shadowRoot.getElementById("textBlock");t.focus(),document.addEventListener(z,(()=>{this.controller.blockArray[this.controller.currentBlockIndex].setCurrentSpot()})),this.plus.onclick=()=>{console.log("hello there")},this.checkBox.onclick=e=>{"checked"===this.checkBox.getAttribute("checked")?(this.checkBox.setAttribute("checked",""),t.classList.remove("crossed"),setTimeout((()=>{B(((t,e)=>{if(null===t){let t=e.tasks.filter((t=>t.id===this.item.objectReference))[0];t.complete=0,S(t,!0,((t,e)=>{console.log(t),console.log(e)}))}}))}),10)):(this.checkBox.setAttribute("checked","checked"),t.classList.add("crossed"),setTimeout((()=>{B(((t,e)=>{if(null===t){let t=e.tasks.filter((t=>t.id===this.item.objectReference))[0];console.log(t),t.complete=1,S(t,!0,((t,e)=>{console.log(t),console.log(e)}))}else console.log(t)}))}),10)),e.preventDefault()},t.onpaste=t=>{let e=t.clipboardData.getData("text/html")||t.clipboardData.getData("text/plain");e=e.replace(/<(?!(\/\s*)?(a|b|i|em|s|strong|u)[>,\s])([^>])*>/g,""),document.execCommand("insertText",!1,e),t.preventDefault()},t.onblur=()=>{t.classList.remove("eventNodateFocused");for(let t=0;t<this.editorIcons.childNodes.length-1;t++)this.editorIcons.childNodes[t].classList.remove("focusedIcons"),this.editorIcons.childNodes[t].classList.add("unfocusedIcons");let n=null;var o,s,i;"event"===this.kind&&(n=function(t,e){let n=null,o=t.shadowRoot.querySelector("#textBlock");if(t.dateSetter&&e){let s=1;for(let t=0;t<o.textContent.length;t++)if(56517===o.textContent.charCodeAt(t)){s=t+1;break}let i=o.textContent.length;if(t.dateSetter){let t=0;for(let e=0;e<o.textContent.length;e++)if(56688===o.textContent.charCodeAt(e)){t=e;break}t>=i&&(i=t)}let r=o.textContent.substring(s,i);r=r.replaceAll(" ","");let l=!1,a=["today","tomorrow","monday","tuesday","wednesday","thursday","friday","saturday","sunday"];a.includes(r.toLowerCase())?l=!0:(l=!0,(r.length>10||r.length<10||r.charAt(0).match(/[^01]/g)||"1"===r.charAt(0)&&r.charAt(1).match(/[^01]/g)||r.charAt(1).match(/[^0123456789]/g)||"/"!==r.charAt(2)||"/"!==r.charAt(5)||r.charAt(6).match(/[^0123456789]/g)||r.charAt(7).match(/[^0123456789]/g)||r.charAt(8).match(/[^0123456789]/g)||r.charAt(9).match(/[^0123456789]/g)||"0"===r.charAt(0)&&"2"===r.charAt(1)&&r.charAt(3).match(/[^012]/g)||r.charAt(3).match(/[^0123]/g)||r.charAt(4).match(/[^0123456789]/g)||et("28"===(r.substring(0,2),r.substring(6))||"29"===et(r.substring(0,2),r.substring(6)))&&r.charAt(3).match(/[^012]/g)||"31"===et(r.substring(0,2),r.substring(6))&&"3"===r.charAt(3)&&r.charAt(4).match(/[^01]/g)||"30"===et(r.substring(0,2),r.substring(6))&&"3"===r.charAt(3)&&r.charAt(4).match(/[^0]/g)||"28"===et(r.substring(0,2),r.substring(6))&&"2"===r.charAt(3)&&r.charAt(4).match(/[^012345678]/g))&&(l=!1)),!l&&e?(r=`${o.textContent.substring(0,s-2)}${o.textContent.substring(i+1)}`,console.log("\n\n\n\n\n\n\n\n\n"),o.innerHTML=r,t.timeSetter=!1,t.atPressed=!1):a.includes(r.toLowerCase())?"today"===r.toLowerCase()?n=new Date:"tomorrow"===r.toLowerCase()?(n=new Date,n.setDate(n.getDate()+1)):n=function(t,e=!0,n=new Date){const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(t.toLowerCase());if(!(o<0))return n.setHours(0,0,0,0),n.setDate((n.getDate()+Number(Boolean(e))+(o+7-n.getDay()-Number(Boolean(e))))%7),n}(r):n=new Date(r)}if(t.timeSetter&&e){let s=1;for(let t=0;t<o.textContent.length;t++)if(56688===o.textContent.charCodeAt(t)){s=t+1;break}let i=o.textContent.length;if(t.dateSetter){let t=0;for(let e=0;e<o.textContent.length;e++)if(56517===o.textContent.charCodeAt(e)){t=e;break}t>=i&&(i=t)}let r=o.textContent.substring(s,i);r=r.replaceAll(" ",""),console.log(r);let l=!0;(5!==r.length||r.charAt(0).match(/[^012]/g)||"2"===r.charAt(0)&&r.charAt(1).match(/[^0123]/g)||r.charAt(1).match(/[^0123456789]/g)||":"!==r.charAt(2)||r.charAt(3).match(/[^012345]/g)||r.charAt(4).match(/[^0123456789]/g))&&(l=!1),!l&&e?(r=`${o.textContent.substring(0,s-2)}${o.textContent.substring(i+1)}`,o.innerHTML=r,t.timeSetter=!1,t.atPressed=!1):(null===n&&(n=new Date),n.setHours(r.substring(0,2),r.substring(3)))}return n}(this,this.eventDelete),console.log(n)),this.eventDelete||(this.eventDelete=!0),null!==this.item?""===t.textContent?(console.log("goodbye my very old friend "+t.textContent),o=this.item,s=!0,i=t=>{console.log(t)},function(t,e,n){console.log("delete textblock is being deleted"),t.get("0000",((o,s)=>{if(o)n(o);else{const o=s.textBlocks.filter((t=>t.id===e));let i=null;console.log("textblockArr is ",o),o.length>0&&(i=o[0],"task"===i.kind?D(i.objectReference,!1,(o=>{o?n(o):y(t,i,e,n)})):"event"===i.kind?(console.log("delteeevntbyID"),T(i.objectReference,!1,(o=>{o?(console.log(o),n(o)):y(t,i,e,n)}))):y(t,i,e,n))}})).then((t=>{console.log(t),n(null)}))}(f,o.id,(t=>{s&&b(),i(t)}))):(console.log("hello my very old friend "+t.textContent),this.item.kind=this.kind,this.item.text=t.textContent,setTimeout((()=>{!function(t,e,n,o){!function(t,e,n,o){console.log(e),t.get("0000",((s,i)=>{if(s)o(s);else{console.log(e);let s=i.textBlocks,r={};for(let t=0;t<s.length;t++)s[t].id===e.id&&(r=s[t],s[t]=e);if("task"===e.kind)if("event"===r.kind){let n=[];Array.prototype.push.apply(n,i.events),A(n.filter((t=>t.id===e.objectReference))[0],!1,(n=>{n?console.log(n):v(e.id,e.text,0,e.signifier,!1,((n,i)=>{n?(console.log(n),o(n)):(e.objectReference=i.id,m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}))}else if("task"===r.kind){let n=i.tasks.filter((t=>t.id===e.objectReference))[0];n.text=e.text,console.log("task before updating it is ",n),S(n,!1,(e=>{e?(console.log(e),o(e)):(console.log("textBlockArr before updateBlock @65 is, ",s),m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}else"task"!==r.kind&&v(e.id,e.text,0,e.signifier,!1,((n,i)=>{n?(console.log(n),o(n)):(e.objectReference=i.id,m(t,s,(t=>{t&&(console.log(t),o(t))})))}));else if("task"!==e.kind&&"task"===r.kind){let n=[];Array.prototype.push.apply(n,i.tasks),I(n.filter((t=>t.id===r.objectReference))[0],!1,(n=>{n?(console.log(n),o(n)):(e.objectReference=null,m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}else if("event"!==e.kind&&"event"===r.kind){let n=[];Array.prototype.push.apply(n,i.events),A(n.filter((t=>t.id===e.objectReference))[0],!1,(n=>{n?(console.log(n),o(n)):(e.objectReference=null,m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}else if("event"===e.kind)if("event"===r.kind){let r=[];Array.prototype.push.apply(r,i.events);let l=r.filter((t=>t.id===e.objectReference))[0];console.log("event is ",i),l.title=e.text,l.date=n,E(l,!1,(e=>{e?(console.log(e),o(e)):m(t,s,(t=>{t&&(console.log(t),o(t))}))}))}else if("task"===r.kind){let r=[];Array.prototype.push.apply(r,i.tasks),I(r.filter((t=>t.id===e.objectReference))[0],!1,(i=>{i?console.log(i):k(e.text,e.id,n,e.signifier,!1,((n,i)=>{n?(console.log(n),o(n)):(e.objectReference=i.id,m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}))}else"event"!==r.kind&&k(e.text,e.id,n,e.signifier,!1,((n,i)=>{n?(console.log(n),o(n)):(e.objectReference=i.id,m(t,s,(t=>{t&&(console.log(t),o(t))})))}))}}))}(f,t,e,(t=>{n&&b(),o(t)}))}(this.item,n,!0,(t=>{console.log(t)}))}),150)):""!==t.textContent&&function(t,n,o,s,i,r,l,a,c,d,p){!function(t,n,o,s,i,r,l,a,c,d,p){t.get("0000",((u,g)=>{if(u)p(u,null);else{console.log(o);let u=e(),y=[];for(Array.prototype.push.apply(y,g.dailyLogs),Array.prototype.push.apply(y,g.monthlyLogs),Array.prototype.push.apply(y,g.futureLogs),Array.prototype.push.apply(y,g.collections),Array.prototype.push.apply(y,g.trackers),Array.prototype.push.apply(y,g.textBlocks),Array.prototype.push.apply(y,g.tasks),Array.prototype.push.apply(y,g.events),Array.prototype.push.apply(y,g.signifiers),Array.prototype.push.apply(y,g.imageBlocks),Array.prototype.push.apply(y,g.audioBlocks);y.filter((t=>t.id===u)).length>0;)u=e();if(h={id:u,objectType:"textBlock",tabLevel:r,parent:n,kind:l,objectReference:a,text:i,signifier:c},"task"!==l&&"event"!==l){let e=[];Array.prototype.push.apply(e,g.dailyLogs),Array.prototype.push.apply(e,g.monthlyLogs),Array.prototype.push.apply(e,g.futureLogs),Array.prototype.push.apply(e,g.trackers),Array.prototype.push.apply(e,g.collections);let i=e.filter((t=>t.id===n));return null===n?null===s?g.index.contents.push(u):g.index.contents.splice(s,0,u):null===s?null===o?i[0].content.push(u):"monthlyLog"===i[0].objectType?i[0].days.filter((t=>t.dailyLog===o))[0].content.push(u):"futureLog"===i[0].objectType&&i[0].months.filter((t=>t.monthlyLog===o))[0].content.push(u):null===o?i[0].content.splice(s,0,u):"monthlyLog"===i[0].objectType?i[0].days.filter((t=>t.dailyLog===o))[0].content.splice(s,0,u):"futureLog"===i[0].objectType&&i[0].months.filter((t=>t.monthlyLog===o))[0].content.splice(s,0,u),g.textBlocks.push(h),t.put({_id:"0000",_rev:g._rev,email:g.email,pwd:g.pwd,theme:g.theme,index:g.index,dailyLogs:g.dailyLogs,monthlyLogs:g.monthlyLogs,futureLogs:g.futureLogs,collections:g.collections,trackers:g.trackers,imageBlocks:g.imageBlocks,audioBlocks:g.audioBlocks,textBlocks:g.textBlocks,tasks:g.tasks,events:g.events,signifiers:g.signifiers}).then((t=>{console.log(t)})).catch((t=>{p(t,null)}))}"task"===l?v(u,i,0,null,!1,((e,i)=>{e?(console.log(e),p(e,null)):(h.objectReference=i.id,B(((e,i)=>{if(!e){let e=[];Array.prototype.push.apply(e,i.dailyLogs),Array.prototype.push.apply(e,i.monthlyLogs),Array.prototype.push.apply(e,i.trackers),Array.prototype.push.apply(e,i.collections);let r=e.filter((t=>t.id===n));return null===n?null===s?i.index.contents.push(u):i.index.contents.splice(s,0,u):null===s?null===o?r[0].content.push(u):"monthlyLog"===r[0].objectType?r[0].days.filter((t=>t.dailyLog===o))[0].content.push(u):"futureLog"===r[0].objectType&&r[0].months.filter((t=>t.monthlyLog===o))[0].content.push(u):null===o?r[0].content.splice(s,0,u):"monthlyLog"===r[0].objectType?r[0].days.filter((t=>t.dailyLog===o))[0].content.splice(s,0,u):"futureLog"===r[0].objectType&&r[0].months.filter((t=>t.monthlyLog===o))[0].content.splice(s,0,u),i.textBlocks.push(h),t.put({_id:"0000",_rev:i._rev,email:i.email,pwd:i.pwd,theme:i.theme,index:i.index,dailyLogs:i.dailyLogs,monthlyLogs:i.monthlyLogs,futureLogs:i.futureLogs,collections:i.collections,trackers:i.trackers,imageBlocks:i.imageBlocks,audioBlocks:i.audioBlocks,textBlocks:i.textBlocks,tasks:i.tasks,events:i.events,signifiers:i.signifiers}).then((t=>{console.log(t),p(null,h)})).catch((t=>{console.log(t),p(t,null)}))}p(e,null)})))})):"event"===l&&k(i,u,d,null,!0,((e,i)=>{e?p(e,null):(h.objectReference=i.id,B(((e,i)=>{if(!e){let e=[];Array.prototype.push.apply(e,i.dailyLogs),Array.prototype.push.apply(e,i.monthlyLogs),Array.prototype.push.apply(e,i.trackers),Array.prototype.push.apply(e,i.collections);let r=e.filter((t=>t.id===n));return null===n?null===s?i.index.contents.push(u):i.index.contents.splice(s,0,u):null===s?null===o?r[0].content.push(u):"monthlyLog"===r[0].objectType?r[0].days.filter((t=>t.dailyLog===o))[0].content.push(u):"futureLog"===r[0].objectType&&r[0].months.filter((t=>t.monthlyLog===o))[0].content.push(u):null===o?r[0].content.splice(s,0,u):"monthlyLog"===r[0].objectType?r[0].days.filter((t=>t.dailyLog===o))[0].content.splice(s,0,u):"futureLog"===r[0].objectType&&r[0].months.filter((t=>t.monthlyLog===o))[0].content.splice(s,0,u),i.textBlocks.push(h),t.put({_id:"0000",_rev:i._rev,email:i.email,pwd:i.pwd,theme:i.theme,index:i.index,dailyLogs:i.dailyLogs,monthlyLogs:i.monthlyLogs,futureLogs:i.futureLogs,collections:i.collections,trackers:i.trackers,imageBlocks:i.imageBlocks,audioBlocks:i.audioBlocks,textBlocks:i.textBlocks,tasks:i.tasks,events:i.events,signifiers:i.signifiers}).then((t=>{console.log(t)})).catch((t=>{console.log(t),p(t,null)}))}p(e,null)})))}))}})).then((t=>{t.ok&&(console.log(h),p(null,h))}))}(f,t,n,o,s,i,r,l,a,c,((t,e)=>{d&&b(),p(t,e)}))}(this.controller.parent.id,this.controller.subParent,this.controller.currentBlockIndex,t.textContent,this.tabLevel,this.kind,null,this.signifier.id,n,!0,((t,e)=>{t||(this.item=e),console.log(t)}))},t.addEventListener("input",(()=>{let e=t.innerHTML;if("event"===this.kind&&(e.includes("@")&&(t.innerHTML=e.replace(/(@)/g,"&#128368;  "),e=t.innerHTML,this.moveToSpot(1e6,!0)),e.includes("#")&&(t.innerHTML=e.replace(/(#)/g,"&#128197;  "),e=t.innerHTML,this.moveToSpot(1e6,!0))),this.setCurrentSpot(),this.timeSetter=!1,this.dateSetter=!1,nt(this,t.textContent,!0),"event"===this.kind){let e="";this.timeSetter?this.dateSetter||(e=`${e} use # for weekdays or dates MM/DD/YY`):(e=`${e} use @ for time HH:MM`,this.dateSetter||(e=`${e} and # for weekdays or dates MM/DD/YY`)),t.setAttribute("dateFiller",e)}"#&nbsp;"===e?this.setupHeader1():"##&nbsp;"===e?this.setupHeader2():"###&nbsp;"===e?this.setupHeader3():"-&nbsp;"===e?this.setupNote():"--&nbsp;"===e?this.setupEvent():"=-&nbsp;"===e?this.setupTask():"<div><br></div>"===e?this.removeStyles():"<br>"===e?t.innerHTML="":""!==t.textContent&&(this.controller.resetPosition=!0)})),t.onfocus=()=>{this.controller.resetPosition=!1,this.setCurrentSpot();for(let t=0;t<this.editorIcons.childNodes.length-1;t++)this.editorIcons.childNodes[t].classList.remove("unfocusedIcons"),this.editorIcons.childNodes[t].classList.add("focusedIcons");this.controller.currentBlockIndex=this.controller.blockArray.indexOf(this),this.controller.currentTabLevel=this.tabLevel,this.classList.contains("noteContainer")||this.classList.contains("eventContainer")||"none"!==this.checkBox.style.display?(this.controller.creatingFromBullet={isTrue:!0,kind:this.kind},"event"===this.kind&&t.classList.add("eventNodateFocused")):this.controller.creatingFromBullet={isTrue:!1,kind:""}},t.onkeydown=e=>{let n=e.key||e.keyCode;if("Backspace"===n||"Delete"===n){let e=this.tabLevel>0,n=20*this.tabLevel,o=this.currentPointerSpot-n==10,s=this.currentPointerSpot-n==30&&this.classList.contains("noteContainer"),i=o||s;""===t.innerHTML&&'Type "/" to create a block'===t.getAttribute("placeholder")&&this.controller.blockArray.length>1?this.controller.removeBlock():""!==t.innerHTML&&"<br>"!==t.innerHTML||0!==this.tabLevel?e&&i&&(this.tabLevel-=1,this.setupTabLevel()):this.removeStyles()}else if("Enter"===n){let n=t.innerHTML;"/h1"===n?(this.setupHeader1(),e.preventDefault()):"/h2"===n?(this.setupHeader2(),e.preventDefault()):"/h3"===n?(this.setupHeader3(),e.preventDefault()):"/note"===n?(this.setupNote(),e.preventDefault()):"/event"===n?(this.setupEvent(),e.preventDefault()):"/task"===n?(this.setupTask(),e.preventDefault()):"/futurelog"===n?(alert("New Future Log will be created"),e.preventDefault()):"/monthlylog"===n?(alert("New Monthly Log will be created"),e.preventDefault()):"/dailylog"===n?(alert("New Daily Log will be created"),e.preventDefault()):"/collection"===n?(alert("New Collection will be created"),e.preventDefault()):"/tracker"===n?(L("Practice Tracker",[],qt.id,((t,e)=>{t?console.log(t):console.log(e)})),e.preventDefault()):(this.controller.resetPosition=!1,this.controller.addNewBlock(null),e.preventDefault())}else if("ArrowDown"===n){let e=t.classList.contains("header1")?80:t.classList.contains("header2")?57:"note"===this.kind||"event"===this.kind||"task"===this.kind?47:42;this.currentPointerHeight>t.offsetHeight-e&&this.controller.moveToNextBlock()}else if("ArrowUp"===n){let e=t.classList.contains("header1")?50:t.classList.contains("header2")?36:28;this.currentPointerHeight<e+this.initialHeight&&this.controller.moveToPreviousBlock()}else if("Tab"===n)this.tabLevel+=1,this.setupTabLevel(),e.preventDefault();else if("@"===n&&"event"===this.kind)if(this.timeSetter)e.stopPropagation(),e.preventDefault();else{this.eventDelete=!1,this.atPressed=!0,this.timeSetter=!0;let e="";this.timeSetter?this.dateSetter||(e=`${e} use # for weekdays or dates MM/DD/YY`):(e=`${e} use @ for time HH:MM`,this.dateSetter||(e=`${e} and # for weekdays or dates MM/DD/YY`)),t.setAttribute("dateFiller",e)}else if("#"===n&&"event"===this.kind)if(this.dateSetter)e.stopPropagation(),e.preventDefault();else{this.eventDelete=!1,this.hashPressed=!0,this.dateSetter=!0;let e="";this.timeSetter?this.dateSetter||(e=`${e} use # for weekdays or dates MM/DD/YY`):(e=`${e} use @ for time HH:MM`,this.dateSetter||(e=`${e} and # for weekdays or dates MM/DD/YY`)),t.setAttribute("dateFiller",e)}else(this.atPressed&&"event"===this.kind&&n.match(/[^0123456789:]/g)&&!tt.includes(n)||this.hashPressed&&"event"===this.kind&&n.match(/[.:"'=,`~|[{}]/g)&&!tt.includes(n))&&(e.stopPropagation(),e.preventDefault())},t.onkeyup=t=>{let e=t.key||t.keyCode;"ArrowRight"!==e&&"ArrowLeft"!==e&&"ArrowDown"!==e&&"ArrowUp"!==e||(this.setCurrentSpot(),"ArrowRight"!==e&&"ArrowLeft"!==e||(this.controller.resetPosition=!0))}}}window.customElements.define("text-block",st);class it extends Object{constructor(t,e,n){super(),this.blockArray=[],this.creatingFromBullet={isTrue:!1,kind:""},this.currentTabLevel=0,this.resetPosition=!0,this.currentBlockIndex=0,this.container=t,this.parent=e,this.subParent=n}createNewBlock(t,e,n){if("textBlock"==t.objectType){let o=new st(this,t,e,(t=>{t&&(this.currentBlockIndex<this.blockArray.length-1?(this.container.insertBefore(o,this.blockArray[this.currentBlockIndex+1]),this.blockArray.splice(this.currentBlockIndex+1,0,o),this.currentBlockIndex+=1):(this.container.appendChild(o),this.blockArray.push(o),this.currentBlockIndex=this.blockArray.length-1),o.focus(),n(o))}))}else"imageBlock"===t.objectType&&console.log("it was image")}addNewBlock(t){let e=new st(this,t,this.generalSignifier,(t=>{t&&(null!==this.blockArray[this.currentBlockIndex].nextSibling?(this.container.insertBefore(e,this.blockArray[this.currentBlockIndex].nextSibling),this.blockArray.splice(this.currentBlockIndex+1,0,e),this.currentBlockIndex+=1):(this.container.appendChild(e),this.blockArray.push(e),this.currentBlockIndex=this.blockArray.length-1),e.focus())}))}moveToNextBlock(){let t=this.blockArray[this.currentBlockIndex];this.currentBlockIndex<this.blockArray.length-1&&this.blockArray[this.currentBlockIndex+1].moveToSpot(t.currentPointerSpot,!1)}moveToPreviousBlock(){let t=this.blockArray[this.currentBlockIndex];this.currentBlockIndex>0&&this.blockArray[this.currentBlockIndex-1].moveToSpot(t.currentPointerSpot,!0)}removeBlock(){let t=this.blockArray[this.currentBlockIndex];this.blockArray.splice(this.currentBlockIndex,1),this.currentBlockIndex=0===this.currentBlockIndex?this.currentBlockIndex:this.currentBlockIndex-1,console.log(this.currentBlockIndex);let e=this.blockArray[this.currentBlockIndex];console.log(e),e.moveToSpot(1e5,!1),this.container.removeChild(t)}}function rt(t,e,n,o,s){if(n<e.length){let i=o.filter((t=>t.id===e[n].signifier))[0];t.createNewBlock(e[n],i,(i=>{i.tabLevel=e[n].tabLevel,i.setupTabLevel(),"note"===e[n].kind?(i.setupNote(),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))):"event"===e[n].kind?(i.setupEvent(),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))):"task"===e[n].kind?(console.log(e[n]),i.setupTask(),B(((r,l)=>{if(null===r){let r=l.tasks.filter((t=>t.id===e[n].objectReference))[0];console.log(r),1===r.complete&&(i.checkBox.setAttribute("checked","checked"),i.shadowRoot.getElementById("textBlock").classList.add("crossed")),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))}else console.log(r)}))):"h1"===e[n].kind?(i.setupHeader1(),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))):"h2"===e[n].kind?(i.setupHeader2(),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))):"h3"===e[n].kind?(i.setupHeader3(),i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)}))):(i.item=e[n],i.shadowRoot.getElementById("textBlock").innerText=e[n].text,rt(t,e,n+1,o,(t=>{s(t)})))}))}else s("done populating items")}function lt(t,e,n,o){rt(t,e,0,n,(t=>{o(t)}))}function at(t,e,n,o){console.log(n);let s=new it(t,e,n);setTimeout((()=>{let i=null,r=[];B(((l,a)=>{if(l)o(l);else{let l=[];Array.prototype.push.apply(l,a.dailyLogs),Array.prototype.push.apply(l,a.monthlyLogs),Array.prototype.push.apply(l,a.futureLogs),Array.prototype.push.apply(l,a.collections),Array.prototype.push.apply(l,a.trackers);let c=a.signifiers.filter((t=>"general"===t.meaning))[0];if(s.generalSignifier=c,null!==e&&"index"!==e.objectType){let d=l.filter((t=>t.id===e.id));if(d.length>0){i=d[0];let e=a.textBlocks;if(null===n)for(let t=0;t<i.content.length;t++)Array.prototype.push.apply(r,e.filter((e=>e.id===i.content[t])));else if("monthlyLog"===i.objectType){let t=i.days.filter((t=>t.dailyLog===n))[0];for(let n=0;n<t.content.length;n++)Array.prototype.push.apply(r,e.filter((e=>e.id===t.content[n])))}else if("futureLog"===i.objectType){let t=i.months.filter((t=>t.monthlyLog===n))[0];for(let n=0;n<t.content.length;n++)Array.prototype.push.apply(r,e.filter((e=>e.id===t.content[n])))}lt(s,r,a.signifiers,(e=>{if("done populating items"===e){let e=new st(s,null,c,(n=>{n&&(t.appendChild(e),s.blockArray.push(e),s.currentBlockIndex=s.blockArray.length-1,e.removeStyles(),e.focus()),o(s)}))}}))}}else{let e=new st(s,null,c,(n=>{n?(t.appendChild(e),s.blockArray.push(e),s.currentBlockIndex=s.blockArray.length-1,e.removeStyles(),e.focus(),console.log("newblock created successfully")):console.log("newBlock not being created"),o(s)}))}}}))}),20)}const ct=document.createElement("template");ct.innerHTML='\n    <style>\n\t\t.qs-datepicker-container{font-size:1rem;font-family:SF-Pro;color:#000;position:absolute;width:15.625em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:9001;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid grey;border-radius:.263921875em;overflow:hidden;background:#fff;-webkit-box-shadow:0 1.25em 1.25em -.9375em rgba(0,0,0,.3);box-shadow:0 1.25em 1.25em -.9375em rgba(0,0,0,.3)}.qs-datepicker-container *{-webkit-box-sizing:border-box;box-sizing:border-box}.qs-centered{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.qs-hidden{display:none}.qs-overlay{position:absolute;top:0;left:0;background:rgba(0,0,0,.75);color:#fff;width:100%;height:100%;padding:.5em;z-index:1;opacity:1;-webkit-transition:opacity .3s;transition:opacity .3s;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.qs-overlay.qs-hidden{opacity:0;z-index:-1}.qs-overlay .qs-overlay-year{background:rgba(0,0,0,0);border:none;border-bottom:1px solid #fff;border-radius:0;color:#fff;font-size:.875em;padding:.25em 0;width:80%;text-align:center;margin:0 auto;display:block}.qs-overlay .qs-overlay-year::-webkit-inner-spin-button{-webkit-appearance:none}.qs-overlay .qs-close{padding:.5em;cursor:pointer;position:absolute;top:0;right:0}.qs-overlay .qs-submit{border:1px solid #fff;border-radius:.263921875em;padding:.5em;margin:0 auto auto;cursor:pointer;background:hsla(0,0%,50.2%,.4)}.qs-overlay .qs-submit.qs-disabled{color:grey;border-color:grey;cursor:not-allowed}.qs-overlay .qs-overlay-month-container{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.qs-overlay .qs-overlay-month{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:calc(100% / 3);cursor:pointer;opacity:.5;-webkit-transition:opacity .15s;transition:opacity .15s}.qs-overlay .qs-overlay-month.active,.qs-overlay .qs-overlay-month:hover{opacity:1}.qs-controls{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:0;flex-shrink:0;background:#d3d3d3;-webkit-filter:blur(0);filter:blur(0);-webkit-transition:-webkit-filter .3s;transition:-webkit-filter .3s;transition:filter .3s;transition:filter .3s,-webkit-filter .3s}.qs-controls.qs-blur{-webkit-filter:blur(5px);filter:blur(5px)}.qs-arrow{height:1.5625em;width:1.5625em;position:relative;cursor:pointer;border-radius:.263921875em;-webkit-transition:background .15s;transition:background .15s}.qs-arrow:hover{background:rgba(0,0,0,.1)}.qs-arrow:hover.qs-left:after{border-right-color:#000}.qs-arrow:hover.qs-right:after{border-left-color:#000}.qs-arrow:after{content:"";border:.390625em solid rgba(0,0,0,0);position:absolute;top:50%;-webkit-transition:border .2s;transition:border .2s}.qs-arrow.qs-left:after{border-right-color:grey;right:50%;-webkit-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);transform:translate(25%,-50%)}.qs-arrow.qs-right:after{border-left-color:grey;left:50%;-webkit-transform:translate(-25%,-50%);-ms-transform:translate(-25%,-50%);transform:translate(-25%,-50%)}.qs-month-year{font-weight:700;-webkit-transition:border .2s;transition:border .2s;border-bottom:1px solid rgba(0,0,0,0);cursor:pointer}.qs-month-year:hover{border-bottom:1px solid grey}.qs-month-year:active:focus,.qs-month-year:focus{outline:none}.qs-month{padding-right:.5ex}.qs-year{padding-left:.5ex}.qs-squares{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:.3125em;-webkit-filter:blur(0);filter:blur(0);-webkit-transition:-webkit-filter .3s;transition:-webkit-filter .3s;transition:filter .3s;transition:filter .3s,-webkit-filter .3s}.qs-squares.qs-blur{-webkit-filter:blur(5px);filter:blur(5px)}.qs-square{width:calc(100% / 7);height:1.5625em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;-webkit-transition:background .1s;transition:background .1s;border-radius:.263921875em}.qs-square:not(.qs-empty):not(.qs-disabled):not(.qs-day):not(.qs-active):hover{background:orange}.qs-current{font-weight:700;text-decoration:underline}.qs-active,.qs-range-end,.qs-range-start{background:#add8e6}.qs-range-start:not(.qs-range-6){border-top-right-radius:0;border-bottom-right-radius:0}.qs-range-middle{background:#d4ebf2}.qs-range-middle:not(.qs-range-0):not(.qs-range-6){border-radius:0}.qs-range-middle.qs-range-0{border-top-right-radius:0;border-bottom-right-radius:0}.qs-range-end:not(.qs-range-0),.qs-range-middle.qs-range-6{border-top-left-radius:0;border-bottom-left-radius:0}.qs-disabled,.qs-outside-current-month{opacity:.2}.qs-disabled{cursor:not-allowed}.qs-day,.qs-empty{cursor:default}.qs-day{font-weight:700;color:grey}.qs-event{position:relative}.qs-event:after{content:"";position:absolute;width:.46875em;height:.46875em;border-radius:50%;background:#07f;bottom:0;right:0}\n\n        :host {\n            font-family: "SF-Pro";\n        }\n        \n        /* The Popup background */\n        .popup {\n            background: white;\n            display: none; /* Hidden by default */\n            position: fixed; /* Stay in place */\n            z-index: 1; /* Sit on top */\n            left: 0;\n            top: 0;\n            bottom: 0; /* Full width */\n            right: 0; /* Full height */\n            overflow: auto; /* Enable scroll if needed */\n            background-color: #0000007F; /* Black w/ opacity */\n        }\n\n        /* Pop up  window */\n        .menu {\n            color: var(--content-foreground-color);\n            background-color: var(--content-background-color); /*#fefefe;*/\n\t\t\tdisplay: flex;\n            flex-direction: column;\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 40%;\n            height: 70%;\n            max-width: 800px;\n            max-height: 800px;\n            transform: translate(-50%,-50%);\n            -ms-transform: translate(-50%,-50%);\n            border: 1px solid #888;\n\t\t\tmin-height: 450px;\n\t\t\tmin-width: 400px;\n\t\t\tborder-radius: 10px;\n        }\n\n        .popup-content {\n            display: flex;\n            flex-direction: column;\n            flex: 1;\n        }\n\n        .menu-content {\n            padding: 20px;\n            grid-column-gap: 5px;\n            justify-items: center;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            flex: 1;\n        }\n\n        header {\n            display: grid;\n            grid-template-columns: 1fr auto 1fr;\n            align-items: center;\n            height: 60px;\n            margin: 0 10px;\n            border-bottom: 2px solid var(--border-color);\n        }\n\n        header h1 {\n            text-align: center;\n            grid-column-start: 2;\n        }\n\n        /* The Close Button */\n        .close {\n            color: var(--content-foreground-color);\n\n            width: 40px;\n            height: 40px;\n            margin-left: auto;\n\n            border: none;\n            background-color: transparent;\n            cursor: pointer;\n        }\n\n        .close img {\n            filter: var(--icon-filter);\n            width: 20px;\n            opacity: 0.5;\n            transition: 0.2s;\n        }\n\n        .close:hover img {\n            opacity: 1;\n            transition: 0.2s;\n        }\n\n        .createLayout {\n            display: grid;\n            grid-template-columns: 1fr auto 1fr;\n            align-items: center;\n        }\n\n        #createButton {\n            grid-column-start: 2;\n            display: inline-block;\n            background-color: var(--content-foreground-color);\n\n            border: none;\n            color: var(--content-background-color);\n            cursor: pointer;\n\t\t\ttext-align: center;\n\t\t\twidth: 140px;\n\t\t\tpadding: 5px 0;\n\t\t\tborder-radius: 10px;\n        }\n\n\t\t#loadingWheel {\n\t\t\twidth: 20px;\n\t\t\tobject-fit: contain;\n            margin-left: auto;\n\t\t}\n\n        form {\n            display: flex;\n            flex-direction: column;\n            align-items: stretch;\n\n            flex: 1;\n        }\n\n        label, input {\n            font-size: 2vh;\n        }\n\n        label {\n            text-align: left;\n            margin-bottom: 20px;\n        }\n\n        input {\n            color: var(--content-foreground-color);\n            width: 100%;\n            border: 2px solid var(--border-color);\n            border-radius: 5px;\n            background-color: var(--content-background-color);\n            box-sizing: border-box;\n        }\n    </style>\n\n    \x3c!-- The Modal --\x3e\n    <div id="popup" class="popup">\n        <div class="menu">\n            <header>\n\n                <h1> Creation Menu </h1>\n                <button class="close"><img id="dismiss" src="../../public/resources/xIcon.png" /></button>\n            </header>\n            \x3c!-- Modal content --\x3e\n            <div class="menu-content">\n                <div class="popup-content"></div>\n                <div class="createLayout">\n                    <img id="loadingWheel" style="display: none;" src="../public/resources/loading.gif"/>\n                    <div id="createButton">Create</div>\n                </div>\n            </div>\n        </div>\n    </div>\n';class dt extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ct.content.cloneNode(!0)),this.startPicker=null,this.endPicker=null,this.popup=this.shadowRoot.getElementById("popup"),this.content=this.shadowRoot.querySelector(".popup-content"),this.heading=this.shadowRoot.querySelector("header h1"),this.kind=t,this.setKind(t),this.closeButton=this.shadowRoot.querySelectorAll(".close")[0],this.create=this.shadowRoot.getElementById("createButton"),this.loadingWheel=this.shadowRoot.getElementById("loadingWheel")}connectedCallback(){this.closeButton.addEventListener("click",(()=>{this.hide()})),this.create.addEventListener("click",(()=>{this.loadingWheel.style.display="inline"})),this.create.addEventListener("click",(()=>{"futureLog"===this.kind?this.createFutureLog():"monthlyLog"===this.kind?this.createMonthlyLog():"collection"===this.kind?this.createCollection():"tracker"===this.kind&&this.createTracker()}))}show(){this.popup.style.display="block"}hide(){this.loadingWheel.style.display="none",this.popup.style.display="none"}setKind(t){this.kind=t,"futureLog"===t?(this.content.innerHTML='\n<form class="future" title="New Future Log">\n    <label>From: <br />\n        <input id="futureFrom" name="future-from">\n    </label>\n\t<label>To: <br />\n        <input id="futureTo" name="future-to">\n    </label>\n</form>\n',null!==this.startPicker&&null!==this.endPicker&&(this.startPicker.remove(),this.endPicker.remove()),this.startPicker=datepicker(this.shadowRoot.getElementById("futureFrom"),{id:1}),this.endPicker=datepicker(this.shadowRoot.getElementById("futureTo"),{id:1})):"monthlyLog"===t?(this.content.innerHTML='\n<form class="monthly" title="New Monthly Log">\n\t<label>From: <br />\n\t<input id="monthlyFrom" name="monthly-from">\n\t</label>\n\t<label>To: <br />\n\t<input id="monthlyTo" name="monthly-to">\n\t</label>\n</form>\n',null!==this.startPicker&&null!==this.endPicker&&(this.startPicker.remove(),this.endPicker.remove()),this.startPicker=datepicker(this.shadowRoot.getElementById("monthlyFrom"),{id:1,onSelect:(t,e)=>{new Date(this.shadowRoot.getElementById("monthlyTo").value).getMonth()!==e.getMonth()&&t.getRange().end&&(this.shadowRoot.getElementById("monthlyTo").value="",this.endPicker.setDate(),alert("Your start and end date must me on the same month")),this.startPicker.hide()}}),this.endPicker=datepicker(this.shadowRoot.getElementById("monthlyTo"),{id:1,onSelect:(t,e)=>{new Date(this.shadowRoot.getElementById("monthlyFrom").value).getMonth()!==e.getMonth()&&t.getRange().end&&(this.shadowRoot.getElementById("monthlyFrom").value="",this.startPicker.setDate(),alert("Your start and end date must me on the same month")),this.endPicker.hide()}})):"dailyLog"===t?(this.content.innerHTML='\n<form class="daily" title="New Daily Log">\n\t<label for="daily-title">Title:</label>\n\t<input type="text" id="daily" name="daily">\n</form>\n',null!==this.startPicker&&null!==this.endPicker&&(this.startPicker.remove(),this.endPicker.remove()),this.startPicker=datepicker(this.shadowRoot.getElementById("daily"),{id:1})):"collection"===t?this.content.innerHTML='\n<form class="collection" title="New Collection">\n\t<label for="collection-title">Title:</label>\n\t<input type="text" id="collection-title" name="collection-title">\n</form>\n':"tracker"===t&&(this.content.innerHTML='\n<form class="tracker" title="New Tracker">\n\t<label for="tracker">New Tracker</label>\n\t<label for="tracker-title">Title:</label>\n\t<input type="text" id="tracker-title" name="tracker-title">\n</form>\n'),this.heading.textContent=this.content.querySelector("form").getAttribute("title")}createFutureLog(){let t=new Date(this.shadowRoot.getElementById("futureFrom").value),e=new Date(this.shadowRoot.getElementById("futureTo").value);t&&e?x(t,e,[],[],!0,((t,e)=>{t?console.log(t):e&&B(((t,n)=>{if(t)console.log(t);else{let t=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=document.getElementById("contentWrapper"),i=new Date(e.startDate),r=new Date(e.endDate),l=new _(`Future Log ${t[i.getMonth()]} ${i.getFullYear()} - ${t[r.getMonth()]} ${r.getFullYear()}`,e,1);s.insertBefore(l,s.lastChild),s.childNodes.length>=1&&l.titleWrapper.classList.add("singleItemWrapper");for(let s=0;s<e.months.length;s++){let i=n.monthlyLogs.filter((t=>t.id===e.months[s].monthlyLog))[0],r=new _(`${t[new Date(i.date).getMonth()]} ${new Date(i.date).getFullYear()}`,i,2);l.contentWrapper.appendChild(r);for(let e=0;e<i.days.length;e++){let s=n.dailyLogs.filter((t=>t.id===i.days[e].dailyLog))[0],l=new _(`${o[new Date(s.date).getDay()]}, ${t[new Date(s.date).getMonth()]} ${new Date(s.date).getUTCDate()}`,s,3);r.contentWrapper.appendChild(l)}}this.hide(),l.scrollIntoView({behavior:"smooth"})}}))})):(alert("You must pick a start and end date!"),this.loadingWheel.style.display="none")}createMonthlyLog(){let t=new Date(this.shadowRoot.getElementById("monthlyFrom").value),e=new Date(this.shadowRoot.getElementById("monthlyTo").value);console.log(new Date(qt.startdate)>e||new Date(qt.endDate)<t),(new Date(qt.startDate)>e||new Date(qt.endDate)<t)&&null!==t&&null!==e?(console.log(t),console.log(e),w(qt.id,[],[],t,e,!0,((n,o)=>{n?console.log(n):o&&B(((n,s)=>{if(n)console.log(n);else{let n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=document.getElementById("contentWrapper"),c=o,d=new _(`${n[new Date(c.date).getMonth()]} ${new Date(c.date).getFullYear()}`,c,1);a.insertBefore(d,a.lastChild),a.childNodes.length>=1&&d.titleWrapper.classList.add("singleItemWrapper"),new Date(qt.startDate)>e?(qt.startDate=t.toDateString(),qt.months.splice(0,0,{id:o.id,content:[],monthlyLog:o.id})):(qt.endDate=e.toDateString(),qt.months.push({id:o.id,content:[],monthlyLog:o.id})),i=!0,r=t=>{t.ok?at(d.contentWrapper,qt,c.id,(t=>{if(t){for(let t=0;t<c.days.length;t++){let e=s.dailyLogs.filter((e=>e.id===c.days[t].dailyLog))[0],o=new _(`${l[new Date(e.date).getDay()]}, ${n[new Date(e.date).getMonth()]} ${new Date(e.date).getUTCDate()}`,e,2);d.contentWrapper.appendChild(o),at(o.contentWrapper,c,e.id,(()=>{}))}this.hide(),dropdown.scrollIntoView({behavior:"smooth"})}})):console.log(errors)},function(t,e,n){console.log(e),t.get("0000",((o,s)=>{if(o)n(o);else{let o=s.futureLogs.filter((t=>t.id!==e.id));o.push(e),t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:o,collections:s.collections,trackers:s.trackers,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:s.tasks,events:s.events,signifiers:s.signifiers},((t,e)=>{n(t||e)}))}}))}(f,qt,(t=>{i&&b(),r(t)}))}var i,r}))}))):t&&e?(alert("You already have these months in your Future Log, please delete them before creating them again"),this.loadingWheel.style.display="none"):(alert("You must pick a start and end date!"),this.loadingWheel.style.display="none")}createCollection(){var t,o,s,i;t=this.shadowRoot.getElementById("collection-title").value,o=qt.id,s=1,i=(t,e)=>{if(t)console.log(t);else{console.log(e);let t=new _(e.title,e,1);contentWrapper.insertBefore(t,contentWrapper.lastChild),this.hide(),t.scrollIntoView({behavior:"smooth"})}},function(t,o,s,i,r){t.get("0000",((l,a)=>{if(!l){console.log(a);let r=e(),l=[];for(Array.prototype.push.apply(l,a.dailyLogs),Array.prototype.push.apply(l,a.monthlyLogs),Array.prototype.push.apply(l,a.futureLogs),Array.prototype.push.apply(l,a.collections),Array.prototype.push.apply(l,a.trackers),Array.prototype.push.apply(l,a.textBlocks),Array.prototype.push.apply(l,a.tasks),Array.prototype.push.apply(l,a.events),Array.prototype.push.apply(l,a.signifiers),Array.prototype.push.apply(l,a.imageBlocks),Array.prototype.push.apply(l,a.audioBlocks);l.filter((t=>t.id===r)).length>0;)r=e();return n={id:r,objectType:"collection",title:o,parent:s,content:i},a.collections.push(n),a.index.contents.push(n.id),t.put({_id:"0000",_rev:a._rev,email:a.email,pwd:a.pwd,theme:a.theme,index:a.index,dailyLogs:a.dailyLogs,monthlyLogs:a.monthlyLogs,futureLogs:a.futureLogs,collections:a.collections,trackers:a.trackers,imageBlocks:a.imageBlocks,audioBlocks:a.audioBlocks,textBlocks:a.textBlocks,tasks:a.tasks,events:a.events,signifiers:a.signifiers})}r(l,null)})).then((t=>{console.log(t),r(null,n)})).catch((t=>{r(t,null)}))}(f,t,o,[],((t,e)=>{s&&!t&&b(),i(t,e)}))}createTracker(){L(this.shadowRoot.getElementById("tracker-title").value,[],qt.id,1,((t,e)=>{t?console.log(t):this.hide()}))}}window.customElements.define("creation-menu",dt);let ht=Z("template",null,Z("link",{type:"text/css",rel:"stylesheet",href:"creator.css"}),Z("div",{id:"editorIcons",class:"paragraphIcons"},Z("img",{src:"../public/resources/plusIcon.png",class:"unfocusedIcons",id:"plus"}),Z("img",{src:"../public/resources/sixDotIcon.png",class:"unfocusedIcons",id:"more"})),Z("div",{id:"textBlock",contentEditable:"true",ondrop:()=>!1,class:"unstylized",placeholder:'Type "/" to create an item: future log, collection, etc'}));class pt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ht.content.cloneNode(!0)),this.plus=this.shadowRoot.getElementById("plus"),this.more=this.shadowRoot.getElementById("more")}connectedCallback(){let t=this.shadowRoot.getElementById("textBlock");this.plus.onclick=()=>{let e=t.getBoundingClientRect().top+t.offsetHeight+105>window.innerHeight?-100:t.offsetHeight+5;F(t.getBoundingClientRect().top+document.body.scrollTop+e,this.plus.getBoundingClientRect().left)},t.onkeydown=e=>{if("Enter"===e.key){e.preventDefault();let n=t.innerHTML;"/futurelog"===n&&"index"===qt.objectType?(Ft.setKind("futureLog"),Ft.show(),Mt.hide()):"/monthlylog"===n&&"futureLog"===qt.objectType?(Ft.setKind("monthlyLog"),Ft.show(),Mt.hide()):"/dailylog"===n&&"monthlyLog"===qt.objectType?(Ft.setKind("dailyLog"),Ft.show(),Mt.hide()):"/collection"===n&&"index"===qt.objectType?(Ft.setKind("collection"),Ft.show(),Mt.hide()):"/tracker"===n&&L("Practice Tracker",[],qt.id,!0,((t,e)=>{t?console.log(t):console.log(e)}))}}}}window.customElements.define("creator-block",pt);const ut=document.createElement("template");ut.innerHTML='\n\t<style>\n        :host {\n            z-index: 1;\n            user-select: none;\n            font-family: "SF-Pro";\n        }\n\n        .dropdown-content {\n            display: none;\n            position: absolute;\n            background-color: var(--dropdown-background-color);\n            overflow: auto;\n        }\n\n        .dropdown-content ul {\n            padding: 5px 8px;\n\t\t\tmargin: 0;\n            list-style-type: none;\n        }\n\n        #myDropdown button {\n            background-color: transparent;\n            border: none;\n            color: var(--dropdown-foreground-color);\n            padding: 10px 1px 10px 18px;\n            text-align: left;\n            text-decoration: none;\n            display: inline-block;\n            font-size: 18px;\n            cursor: pointer;\n            width: 100%;\n            min-width: 190px;\n        }\n\n        \n\n        li:hover {\n            background-color: var(--dropdown-hover-color);\n        }\n        \n        .show {display: block;}\n\n\n\t</style> \n\t<div class="dropdown">\n\t\t<div id="myDropdown" class="dropdown-content">\n\t\t\t<ul id="dropdownList">\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t\n';class gt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ut.content.cloneNode(!0)),this.dropdown=this.shadowRoot.getElementById("myDropdown"),this.list=this.shadowRoot.getElementById("dropdownList"),this.clicked=!1}connectedCallback(){document.addEventListener("resize",(t=>{this.hide()})),document.addEventListener("click",(t=>{this.contains(t.target)||this.clicked||this.hide(),this.clicked=!1}))}toggleDropdown(){this.dropdown.classList.toggle("show"),this.clicked=!0}hide(){this.dropdown.classList.toggle("show",!1),this.clicked=!1}show(){this.dropdown.classList.toggle("show",!0),this.clicked=!0}fillDropdown(t){for(;this.list.firstChild;)this.list.lastChild.remove();if(t.length){for(let e=0;e<t.length;e++){let n=t[e].title,o=document.createElement("button");o.innerHTML=n;let s=document.createElement("li");s.appendChild(o),this.list.appendChild(s),o.onclick=t[e].listener}this.show()}else this.hide()}setPosition(t,e){this.dropdown.style.top=`${t}px`,this.dropdown.style.left=`${e}px`}}window.customElements.define("inline-dropdown",gt);class yt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n        <style>\n            :host {\n                font-family: "SF-Pro";\n                display: flex;\n                height: 100%;\n                flex-direction: column;\n                justify-content: flex-end;\n            }\n\n            #logout {\n                margin-top: auto;\n                border: none;\n                background-color: #EF233C;\n                color: #FFFFFF;\n                font-size: 22px;\n                height: 30px;\n                padding: 10px;\n                border-radius: 5px;\n                box-sizing: content-box;\n                cursor: pointer;\n                transition: background-color 0.2s;\n\n            }\n\n            #logout:active {\n                background-color: pink;\n            }\n\n            .profile {\n                text-align: center;\n            }\n        </style>\n\n        <div class="profile">Profile placeholder</div>\n        <button id="logout"> Logout </button>\n        ';let t=this.shadowRoot.querySelectorAll("input[type=radio]");for(let e of t)e.addEventListener("change",(()=>this.updateTheme(e.id)));this.logoutButton=this.shadowRoot.getElementById("logout")}connectedCallback(){this.logoutButton.onclick=()=>{(navigator.onLine||confirm("You're logging out while offline, all your local changes will be deleted if you continue!"))&&(b(),f.destroy(((t,e)=>{t?console.log(t):console.log(e)})),f.info(((t,e)=>{t?console.log(t):console.log(e)})),window.location.href="/login")}}}customElements.define("general-settings-panel",yt);const mt={darkmode:{"--border-color":"#4d4d4d","--content-background-color":"#2e3030","--content-foreground-color":"#D4D4D4","--tracker-background-color":"#1e2020","--tracker-foreground-color":"#d4d4d4","--tracker-border-color":"#404040","--navbar-background-color":"#1e2020","--navbar-foreground-color":"#d4d4d4","--dropdown-background-color":"#1e2020","--dropdown-foreground-color":"#d4d4d4","--dropdown-hover-color":"#474a4a","--icon-filter":"invert()"},lightmode:{"--border-color":"#F2F2F2","--content-background-color":"#FFFFFF","--content-foreground-color":"#000000","--tracker-background-color":"#2B2D42","--tracker-foreground-color":"#FFFFFF","--tracker-border-color":"#48486f","--navbar-background-color":"#F7F2EC","--navbar-foreground-color":"#FFFFFF","--dropdown-background-color":"#f7f2ec","--dropdown-foreground-color":"#000000","--dropdown-hover-color":"#dfdcd8","--icon-filter":""},highcontrast:{"--border-color":"#F2F2F2","--content-background-color":"#000000","--content-foreground-color":"#FFFFFF","--tracker-background-color":"#0000FF","--tracker-foreground-color":"#FFFFFF","--tracker-border-color":"#FFFFFF","--navbar-background-color":"#008F00","--navbar-foreground-color":"#FFFFFF","--dropdown-background-color":"#008F00","--dropdown-foreground-color":"#ffffff","--dropdown-hover-color":"#FF00FF","--icon-filter":"invert()"},theme4:{"--border-color":"#F2F2F2","--content-background-color":"#FFFFFF","--content-foreground-color":"#000000","--tracker-background-color":"#026670","--tracker-foreground-color":"#FFFFFF","--tracker-border-color":"#1d7d86","--navbar-background-color":"#FCE181","--navbar-foreground-color":"#fed442","--dropdown-background-color":"#FFFFFF","--dropdown-foreground-color":"#000000","--dropdown-hover-color":"#efeded","--icon-filter":""},theme5:{"--border-color":"#8E8D8A","--content-background-color":"#EAE7DC","--content-foreground-color":"#000000","--tracker-background-color":"#48131A","--tracker-foreground-color":"#FFFFFF","--tracker-border-color":"#6F474E","--navbar-background-color":"#D8C3A5","--navbar-foreground-color":"#000000","--dropdown-background-color":"#D8C3A5","--dropdown-foreground-color":"#000000","--dropdown-hover-color":"#c8ae89","--icon-filter":""},theme6:{"--border-color":"#34375c","--content-background-color":"#1A1A3D","--content-foreground-color":"#E3E3E8","--tracker-background-color":"#25274D","--tracker-foreground-color":"#E3E3E8","--tracker-border-color":"#464866","--navbar-background-color":"#25274D","--navbar-foreground-color":"#000000","--content-placeholder-color":"#505b84","--dropdown-background-color":"#D8C3A5","--dropdown-foreground-color":"#000000","--dropdown-hover-color":"#c8ae89","--icon-filter":"invert()"}};class ft extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n        <style>\n            @font-face {\n                font-family:"SF-Pro";\n                src: url("./public/fonts/SF-Pro.ttf");\n            }\n\n            :host {\n                display: block;\n                font-family: "SF-Pro";\n            }\n\n            form {\n                margin: 0;\n\t\t\t\tdisplay: flex;\n                flex-flow: row wrap;\n\t\t\t\tjustify-content: space-evenly;\n\t\t\t\talign-content: center;\n            }\n\n\t\t\tlabel {\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-size: 16pt;\n\t\t\t\tmargin-bottom: 30px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t.themeImg {\n\t\t\t\twidth: 250px;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\ttransition: 0.2s;\n\t\t\t}\n\n\t\t\tinput[type="radio"] {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\tinput[type="radio"]:checked + img.themeImg {\n\t\t\t\tbox-shadow: 0 0 0 8px var(--content-foreground-color);\n\t\t\t\ttransition: 0.2s;\n\t\t\t}\n\n        </style>\n\n        <form id="theme">\n            <label>Cool Dark <br />\n                <input type="radio" name="themeradio" id="darkmode" /><img class="themeImg" src="../../public/resources/coolDark.png" />\n            </label>\n            <label>Minimal Light <br />\n                <input type="radio" name="themeradio" id="lightmode" /><img class="themeImg" src="../../public/resources/minimalLight.png" />\n            </label>\n            <label>High Contrast <br />\n                <input type="radio" name="themeradio" id="highcontrast" /><img class="themeImg" src="../../public/resources/highContrast.png" />\n            </label>\n            <label>Snazzy Light <br />\n                <input type="radio" name="themeradio" id="theme4" /><img class="themeImg" src="../../public/resources/snazzyLight.png" />\n            </label>\n            <label>Classy Light <br />\n                <input type="radio" name="themeradio" id="theme5" /><img class="themeImg" src="../../public/resources/classyLight.png" />\n            </label>\n            <label>Night Owl <br />\n                <input type="radio" name="themeradio" id="theme6" /><img class="themeImg" src="../../public/resources/nightOwl.png" />\n            </label>\n        </form>\n        ',this.themeRadios=this.shadowRoot.querySelectorAll("input[type=radio]")}connectedCallback(){for(let t of this.themeRadios)t.addEventListener("change",(()=>{var e,n,o;e=t.id,n=!0,o=e=>{console.log("here"),e?console.log(e):(console.log("here"),this.updateTheme(t.id))},function(t,e,n){console.log(e),t.get("0000",((o,s)=>{if(!o)return t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:e,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,collections:s.collections,trackers:s.trackers,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:s.tasks,events:s.events,signifiers:s.signifiers},((t,e)=>{t?n(t):(console.log(e),n(null))}));n(o)}))}(f,e,(t=>{n&&b(),o(t)}))}));B(((t,e)=>{t?console.log(t):(this.shadowRoot.getElementById(e.theme).toggleAttribute("checked",!0),this.updateTheme(e.theme))}))}updateTheme(t){let e=document.documentElement;for(let n in mt[t])null!==n&&e.style.setProperty(n,mt[t][n])}}customElements.define("theme-panel",ft);class bt extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                @font-face {\n                    font-family:"SF-Pro";\n                    src: url("./public/fonts/SF-Pro.ttf");\n                }\n\n                :host {\n                    font-family: "SF-Pro";\n                    position: fixed;\n                    z-index: 10;\n                }\n\n                .overlay {\n                    position: fixed;\n                    width: 100%;\n                    height: 100%;\n                    top: 0;\n                    left: 0;\n                    bottom: 0;\n                    right: 0;\n                    background-color: #0000007F;\n                    user-select: none;\n                }\n\n                .close {\n                    color: var(--content-foreground-color);\n\n                    width: 40px;\n                    height: 40px;\n                    margin-left: auto;\n\n                    border: none;\n                    background-color: transparent;\n                    cursor: pointer;\n                }\n\n\t\t\t\t.close img {\n\t\t\t\t\tfilter: var(--icon-filter);\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\topacity: 0.5;\n\t\t\t\t\ttransition: 0.2s;\n\t\t\t\t}\n\n\t\t\t\t.close:hover img {\n\t\t\t\t\topacity: 1;\n\t\t\t\t\ttransition: 0.2s;\n\t\t\t\t}\n\n                .menu {\n                    display: flex;\n                    position: absolute;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\toverflow: hidden;\n                    top: 50%;\n                    left: 50%;\n                    width: 80%;\n                    height: 80%;\n\t\t\t\t\tmax-width: 800px;\n\t\t\t\t\tmax-height: 800px;\n                    transform: translate(-50%,-50%);\n                    -ms-transform: translate(-50%,-50%);\n                    background-color: var(--content-background-color);\n                }\n\n                .sidebar {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n\n                    left: 0;\n                    top: 0;\n                    bottom: 0;\n                    background-color: var(--navbar-background-color);\n                }\n\n                .content {\n                    display: flex;\n                    flex-direction: column;\n                    flex: 1;\n                }\n\n                .options {\n                    display: flex;\n                    flex: 1;\n                    overflow-y: auto;\n                    padding: 20px;\n                }\n\n                h1 {\n                    grid-column-start: 2;\n                    text-align: center;\n                    flex: 1;\n                }\n\n                header {\n                    display: grid;\n                    grid-template-columns: 1fr auto 1fr;\n                    align-items: center;\n                    height: 60px;\n                    margin-left: 10px;\n                    margin-right: 10px;\n                    border-bottom: 2px solid var(--border-color);\n                }\n\n                ::slotted(settings-tab[selected]) {\n                    background-color: var(--content-background-color);\n                }\n                \n                ::slotted(settings-panel) {\n                    flex: 1;\n                    overflow-y: auto;\n                }\n            </style>\n\n            <div class="overlay">\n                <div class="menu">\n                    <div class="sidebar">\n                        <slot name="settings-tab"></slot>\n                    </div>\n\n                    <div class="content">\n                        <header>\n                            <h1>Settings</h1>\n                            <button class="close"><img id="dismiss" src="../../public/resources/xIcon.png" /></button>\n                        </header>\n\n                        <div class="options">\n                            <slot name="settings-panel"></slot>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',this.shadowRoot.querySelector(".close").addEventListener("click",(()=>{this.hide()})),this.tabSlot=this.shadowRoot.querySelector("slot[name=settings-tab]"),this.panelSlot=this.shadowRoot.querySelector("slot[name=settings-panel]"),this.changeTab=this.changeTab.bind(this),this.linkPanels=this.linkPanels.bind(this),this.tabSlot.addEventListener("slotchange",(()=>this.linkPanels)),this.panelSlot.addEventListener("slotchange",(()=>this.linkPanels)),this.headerTitle=this.shadowRoot.querySelector("header h1")}connectedCallback(){this.innerHTML='\n\t<style>\n\t\tsettings-tab {\n\t\t\tcursor: pointer;\n\t\t}\n\t</style>\n    <settings-tab slot="settings-tab" title="Settings">\n        <img slot="icon" src="public/resources/generalSettingsIcon.png">\n    </settings-tab>\n    <settings-panel slot="settings-panel">\n        <general-settings-panel>\n    </settings-panel>\n\n    <settings-tab slot="settings-tab" title="Theme">\n        <img slot="icon" src="public/resources/palette.png">\n    </settings-tab>\n    <settings-panel slot="settings-panel">\n        <theme-panel></theme-panel>\n    </settings-panel>\n',this.classList.toggle("open",!1),this.setAttribute("aria-hidden",!0),this.style.display="none",this.removeAttribute("open"),Promise.all([customElements.whenDefined("settings-tab"),customElements.whenDefined("settings-panel")]).then((()=>this.linkPanels())),this.addEventListener("click",(t=>{"tab"===t.target.getAttribute("role")&&this.changeTab(t.target)}))}tabs(){return this.querySelectorAll("settings-tab")}panels(){return this.querySelectorAll("settings-panel")}linkPanels(){let t=this.tabs();if(0===t.length)return;let e=null;for(let n of t){let t=n.nextElementSibling;n.setAttribute("aria-controls",t.id),t.setAttribute("aria-labelledby",n.id),null===e&&n.selected&&(e=n)}null===e&&(e=t.item(0)),this.changeTab(e)}changeTab(t){let e=Array.from(this.tabs()),n=Array.from(this.panels());e.forEach((t=>{t.selected=!1})),n.forEach((t=>{t.hidden=!0}));let o=t.getAttribute("aria-controls"),s=this.querySelector(`#${o}`);s||console.log("panel not found"),this.headerTitle.innerText=t.getAttribute("title"),t.selected=!0,s.hidden=!1,t.focus()}attributeChangedCallback(t,e,n){e!==n&&(this[t]=this.hasAttribute(t))}get open(){return this.hasAttribute("open")}set open(t){this.classList.toggle("open",t),this.setAttribute("aria-hidden",!t),t?(this.setAttribute("open","true"),R(this,(()=>{this.focus()}))):C(this,(()=>{this.removeAttribute("open")}))}toggle(){this.open=!this.open}show(){this.open=!0}hide(){this.open=!1}}customElements.define("settings-menu",bt);let kt=0,xt=document.createElement("template");xt.innerHTML='\n<style>\n    :host {\n        padding: 10px;\n    }\n\n    ::slotted(img) {\n        pointer-events: none;\n        width: 32px;\n        height: 32px;\n        opacity: 50%;\n        filter: var(--icon-filter);\n    }\n\n    :host(:hover) ::slotted(img) {\n        opacity: 100%;\n        transition: opacity 150ms;\n    }\n</style>\n\n<slot name="icon"></slot>\n';class wt extends HTMLElement{static get observedAttributes(){return["selected"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(xt.content.cloneNode(!0))}connectedCallback(){this.setAttribute("role","tab"),this.id||(this.id=`settings-tab-generated-${kt}`,kt+=1),this.setAttribute("aria-selected","false")}attributeChangedCallback(){const t=this.hasAttribute("selected");this.setAttribute("aria-selected",t)}set selected(t){Boolean(t)?this.setAttribute("selected",""):this.removeAttribute("selected")}get selected(){return this.hasAttribute("selected")}}customElements.define("settings-tab",wt);let vt=0;class Lt extends HTMLElement{connectedCallback(){this.setAttribute("role","tabpanel"),this.id||(this.id=`settings-panel-generated-${vt}`,vt+=1)}}customElements.define("settings-panel",Lt);const Bt=document.createElement("template");Bt.innerHTML='\n\t<style>\n\t\t.navigation {\n\t\t\tdisplay: none; \n\t\t}\n\n\t\t.nav-bar {\n\t\t\tposition: fixed;\n\t\t\twidth: 60px;\n\t\t\theight: 100%;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\tdisplay: block;\n\t\t\tbackground-color: var(--navbar-background-color);\n\t\t}\n\n\t\tbutton {\n\t\t\tdisplay: block;\n\t\t\tbackground-color: transparent;\n\t\t\tborder: none;\n\t\t\tpadding: 0;\n\t\t\twidth: 32px;\n\t\t\theight: 32px;\n\t\t\tmargin: 20px auto 44px auto;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\tbutton img {\n\t\t\theight: 100%;\n\t\t\tfilter: var(--icon-filter);\n\t\t\topacity: 50%;\n\t\t}\n\n\t\tbutton:hover img {\n\t\t\topacity: 100%;\n\t\t\ttransition: opacity 25ms;\n\t\t}\n\n\t\t#bottom {\n\t\t\tposition: absolute;\n\t\t\tbottom: 10px;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t#user {\n\t\t\tposition: static;\n\t\t\tmargin: 0 auto;\n\t\t}\n\n\t\t@media only screen and (max-width:1100px) {\n\t\t\t#menu {\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 30%;\n\t\t\t\theight: 100%;\n\t\t\t\tbox-shadow: 0 0 2px #85888C;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tbackground-color: var(--navbar-background-color);\n\t\t\t\t-webkit-font-smoothing: antialiased;\n\t\t\t}\n\n\t\t\t#menu.closed {\n\t\t\t\ttransform: translate(-100%, 0);\n\t\t\t\ttransition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0);\n\t\t\t}\n\n\t\t\t#menu.open {\n\t\t\t\ttransform-origin: 0 0;\n\t\t\t\ttransition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0);\n\t\t\t}\n\n\t\t\t.nav-bar {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\n\t\t\t.navigation {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding: none;\n\t\t\t\tmargin: none;\n\t\t\t\twidth: 30vh;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tposition:fixed;\n\t\t\t}\n\n\t\t\t#homeMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\ttop: 70px;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tmargin: auto;\n\t\t\t}\n\n\t\t\t#singleMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\ttop: 180px;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tmargin: auto;\n\t\t\t}\n\n\t\t\t#doubleMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\ttop: 290px;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tmargin: auto;\n\t\t\t}\n\n\t\t\t#userMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 65px;\n\t\t\t\theight: 65px;\n\t\t\t\ttop: calc(100% - 115px);\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\tmargin: 0 auto;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-height: 1200px){\n\t\t\t#homeMenu {\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t}\n\n\t\t\t#singleMenu {\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t\ttop: 150px;\n\t\t\t}\n\n\t\t\t#doubleMenu {\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t\ttop: 230px;\n\t\t\t}\n\n\t\t\t#userMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 45px;\n\t\t\t\theight: 45px;\n\t\t\t\ttop: calc(100% - 85px);\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-height: 800px){\n\t\t\t#homeMenu {\n\t\t\t\twidth: 35px;\n\t\t\t\theight: 35px;\n\t\t\t}\n\n\t\t\t#singleMenu {\n\t\t\t\twidth: 35px;\n\t\t\t\theight: 35px;\n\t\t\t\ttop: 130px;\n\t\t\t}\n\n\t\t\t#doubleMenu {\n\t\t\t\twidth: 35px;\n\t\t\t\theight: 35px;\n\t\t\t\ttop: 190px;\n\t\t\t}\n\n\t\t\t#userMenu {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t\ttop: calc(100% - 65px);\n\t\t\t}\n\t\t}\n\t</style> \n\n\t<nav class="nav-bar">\n\t\t<button id="home">  <img src="../public/resources/home_icon.png"></button>\n\t\t<button id="target"><img src="../public/resources/target_icon.png"></button>\n\t\t<button id="single"><img src="../public/resources/left.png"></button>\n\t\t<button id="double"><img src="../public/resources/double_icon.png"></button>\n\t\t<div id="bottom">\n\t\t\t<button id="user">  <img src="../public/resources/user.png"></button>\n\t\t</div>\n\t</nav>\n\t<nav class="navigation">\n\t\t<div id="menu" class="closed">\n\t\t\t<button id="homeMenu">  <img src="../public/resources/home_icon.png"></button>\n\t\t\t<button id="singleMenu"><img src="../public/resources/left.png"></button>\n\t\t\t<button id="doubleMenu"><img src="../public/resources/double_icon.png"></button>\n\t\t\t<button id="userMenu">  <img src="../public/resources/user.png"></button>\n\t\t</div>\n\t</nav>\n';class At extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Bt.content.cloneNode(!0)),this.home=this.shadowRoot.querySelectorAll("button")[0],this.target=this.shadowRoot.querySelectorAll("button")[1],this.single=this.shadowRoot.querySelectorAll("button")[2],this.double=this.shadowRoot.querySelectorAll("button")[3],this.user=this.shadowRoot.querySelectorAll("button")[4],this.menu=this.shadowRoot.querySelector("#menu"),this.homeMenu=this.shadowRoot.querySelector("#homeMenu"),this.singleMenu=this.shadowRoot.querySelector("#singleMenu"),this.doubleMenu=this.shadowRoot.querySelector("#doubleMenu"),this.userMenu=this.shadowRoot.querySelector("#userMenu")}connectedCallback(){this.home.addEventListener("click",(()=>{this.goHome()})),this.target.addEventListener("click",(()=>{this.toggleTracker()})),this.single.addEventListener("click",(()=>{this.goBack()})),this.double.addEventListener("click",(()=>{this.goFarBack()})),this.user.addEventListener("click",(()=>{document.querySelector("settings-menu").toggle()})),this.homeMenu.addEventListener("click",(()=>{this.goHome(),this.open=!1})),this.singleMenu.addEventListener("click",(()=>{this.goBack(),this.open=!1})),this.doubleMenu.addEventListener("click",(()=>{this.goFarBack(),this.open=!1})),this.userMenu.addEventListener("click",(()=>{let t=document.querySelector("settings-menu");typeof t===bt&&t.toggle()}))}attributeChangedCallback(t,e,n){e!==n&&(this[t]=n)}goHome(){null!==document.location.hash&&"#index"!==document.location.hash&&""!==document.location.hash&&q.setState("",!1)}goBack(){let t=document.location.hash.includes("#dailyLog")?"monthlyLog":"futureLog";q.setState(`#${t}~${qt.parent}`,!1)}goFarBack(){let t=document.location.hash.includes("#dailyLog")?"futureLog":"index";localStorage.readUser(((e,n)=>{if(null===e){let e=[];Array.prototype.push.apply(e,n.dailyLogs),Array.prototype.push.apply(e,n.monthlyLogs),Array.prototype.push.apply(e,n.futureLogs),Array.prototype.push.apply(e,n.collections);let o=e.filter((t=>t.id===qt.parent))[0];q.setState(`#${t}~${o.parent}`,!1)}else console.log(e)}))}toggleTracker(){document.querySelector("tracker-menu").toggle()}toggle(){this.open=!this.open}get open(){return this.hasAttribute("open")}set open(t){this.menu.classList.toggle("open",t),this.menu.classList.toggle("closed",!t),this.menu.setAttribute("aria-hidden",!t),t?(this.setAttribute("open","true"),this.focus(),St.menuToggle.checked=!0):(this.removeAttribute("open"),St.menuToggle.checked=!1)}}customElements.define("nav-bar",At);class Tt extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n\t\t\t<style>\n\t\t\t\t@font-face {\n\t\t\t\t\tfont-family:"SF-Pro";\n\t\t\t\t\tsrc: url("./public/fonts/SF-Pro.ttf");\n\t\t\t\t}\n\n\t\t\t\t:host {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmargin-left: 80px;\n\t\t\t\t\tmargin-right: 20px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t}\n\t\t\n\t\t\t\t/* Top navigation */\n\t\t\t\t#container {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\theight: 75px;\n\t\t\t\t\tborder-bottom: solid 2px var(--border-color);\n\t\t\t\t}\n\n\t\t\t\t.header {\n\t\t\t\t\tfont-family: "SF-Pro";\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tflex: 2;/* Use half of the space for the title */\n\t\t\t\t}\n\t\t\n\t\t\t\tbutton {\n\t\t\t\t\tuser-select: none;\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tbackground-color: rgba(0,0,0,0);\n\t\t\t\t\tdisplay: inline;\n\t\t\t\t}\n\n\t\t\t\tbutton.plus {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\twidth: 23px;\n\t\t\t\t\theight: 23px;\n\t\t\t\t\tmargin-right: 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.imgbutton {\n\t\t\t\t\theight: 20px;\n\t\t\t\t}\n\t\t\n\t\t\t\t.imgbutton img {\n\t\t\t\t\topacity: 20%;\n\t\t\t\t\tfilter: var(--icon-filter);\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\n\t\t\t\t.imgbutton:hover img {\n\t\t\t\t\topacity: 100%;\n\t\t\t\t\ttransition: opacity 150ms;\n\t\t\t\t}\n\t\t\n\t\t\t\th1 {\n\t\t\t\t\tdisplay: inline;\n\t\t\t\t\tfont-size: 40px;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tletter-spacing: 1.8px;\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\toutline: none;\n\t\t\t\t}\n\t\t\n\t\t\t\t.search_bar {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tmargin: 15px auto 15px 10px;\n\t\t\t\t\tpadding: 0 5px;\n\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\tborder-color: var(--border-color); /*rgba(0, 0, 0, 0.1);*/\n\t\t\t\t\tborder-width: 2px;\n\t\t\t\t\tborder-style: solid;\n\t\t\t\t\topacity: 60%;\n\t\t\t\t}\n\t\t\n\t\t\t\t.search_bar img {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\n\t\t\t\t\topacity: 50%;\n\t\t\t\t\theight: 21px;\n\t\t\n\t\t\t\t\tvertical-align: middle;\n\n\t\t\t\t\tfilter: var(--icon-filter);\n\t\t\t\t}\n\n\t\t\t\t.search_bar input{\n\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0);\n\t\t\t\t\tcolor: var(--content-foreground-color);\n\t\t\t\t\tfont-size: 14pt;\n\t\t\t\t\topacity: 90%;\n\t\t\t\t\theight: 35px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\twidth: 400px;\n\t\t\t\t\tborder: solid;\n\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\tborder-color: rgba(0, 0, 0, 0);\n\t\t\t\t\toutline: none;\n\t\t\t\t}\n\t\t\n\t\t\t\t/* Fade in for search bar */\n\t\t\t\t.search_bar:hover img {\n\t\t\t\t\topacity: 50%;\n\t\t\t\t\ttransition: opacity 150ms;\n\t\t\t\t}\n\t\t\n\t\t\t\t.search_bar:hover {\n\t\t\t\t\ttransition: 150ms;\n\t\t\t\t\topacity: 90%;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\n\t\t\t\t.search_bar input:focus .search_bar{\n\t\t\t\t\ttransition: 150ms;\n\t\t\t\t\topacity: 90%;\n\t\t\t\t}\n\t\t\n\t\t\t\t#header_back{\n\t\t\t\t\tmargin-left: 0;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t}\n\t\t\n\t\t\t\t#header_forward{\n\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\tmargin-left: 5px;\n\t\t\t\t}\n\t\t\n\t\t\t\t.hide{\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\topacity: 0;\n\t\t\t\t}\n\n\t\t\t\t#menuToggle {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 1450px) {\n\t\t\t\t\t.search_bar input {\n\t\t\t\t\t\twidth: 220px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 1280px) {\n\t\t\t\t\t.search_bar input {\n\t\t\t\t\t\twidth: 170px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 1220px) {\n\t\t\t\t\t.search_bar {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 1100px) {\n\t\t\t\t\t\n\t\t\t\t\t:host {\n\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\tpadding-top: 10px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.search_bar {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t.header{\n\t\t\t\t\t\tmargin-left: 35px;\n\t\t\t\t\t\tmargin-right: 35px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tflex: 2;\n\t\t\t\t\t}\n\n\t\t\t\t\t.plus {\n\t\t\t\t\t\twidth: 23px;\n\t\t\t\t\t\theight: 23px;\n\t\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t\t\tright: 20px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#title_page{\n\t\t\t\t\t\ttop: 5px;\n\t\t\t\t\t\tfont-size: 35px;\n\t\t\t\t\t\tletter-spacing: 1.5px;\n\t\t\t\t\t}\n\n\t\t\t\t\tbutton.imgbutton {\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t}\n\t\t\t\t\t#header_back{\n\t\t\t\t\t\tmargin-left: 0;\n\t\t\t\t\t\tmargin-right: 1px;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t#header_forward{\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t\tmargin-left: 1px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t#container{\n\t\t\t\t\t\theight: 70px;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t#menuToggle {\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tleft: 20px;\n\t\t\t\t\t\tpadding-top: 5px;\n\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle input {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\twidth: 40px;\n\t\t\t\t\t\theight: 32px;\n\t\t\t\t\t\tleft: 10px;\n\t\t\t\t\t\ttop: 15px;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle span {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\twidth: 29px;\n\t\t\t\t\t\theight: 2px;\n\t\t\t\t\t\tmargin-top: 5px;\n\t\t\t\t\t\tmargin-bottom: 5px;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\t\tbackground: var(--content-foreground-color);\n\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t\ttransform-origin: 5px 0px;\n\t\t\t\t\t\ttransition: transform 0.5s cubic-bezier(0.77,0.2,0.05,1.0),\n\t\t\t\t\t\t\t\t\tbackground 0.5s cubic-bezier(0.77,0.2,0.05,1.0),\n\t\t\t\t\t\t\t\t\topacity 0.55s ease;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle span:first-child {\n\t\t\t\t\t\ttransform-origin: 0% 0%;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle span:nth-last-child(2) {\n\t\t\t\t\t\ttransform-origin: 0% 100%;\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle input:checked ~ span {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: rotate(45deg) translate(-7px, -10px);\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle input:checked ~ span:nth-last-child(3) {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: rotate(0deg) scale(0.2, 0.2);\n\t\t\t\t\t}\n\t\t\n\t\t\t\t\t#menuToggle input:checked ~ span:nth-last-child(2) {\n\t\t\t\t\t\ttransform: rotate(-45deg) translate(-5px, 10px);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 700px) {\n\t\t\t\t\t.plus{\n\n\t\t\t\t\t}\n\n\t\t\t\t\t#container{\n\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#title_page{\n\t\t\t\t\t\ttop: 5px;\n\t\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\t\tletter-spacing: 1px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#menuToggle input {\n\t\t\t\t\t\ttop: 8px;\n\t\t\t\t\t}\n\n\t\t\t\t\tbutton.imgbutton img {\n\t\t\t\t\t}\n\n\t\t\t\t\tbutton.imgbutton {\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t#header_back {\n\t\t\t\t\t\tmargin-left: 0;\n\t\t\t\t\t\tmargin-right: 1px;\n\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t#header_forward{\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t\tmargin-left: 1px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</style>\n\n\t\t\t<div id="container">\n\t\t\t\t<div id="menuToggle">\n\t\t\t\t\t<input type="checkbox" />\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</div>\n\t\t\t\t<span class="header">\n\t\t\t\t\t<button class="imgbutton" id="header_back"><img src="../public/resources/left-chevron.png"></button>\n\t\t\t\n\t\t\t\t\t<h1 id="title_page">Template Page Title</h1>\n\t\t\t\n\t\t\t\t\t<button class="imgbutton" id="header_forward"><img src="../public/resources/right-chevron.png"></button>\n\t\t\t\t</span>\n\t\t\t\n\t\t\t\t<button class="imgbutton plus"><img src="../public/resources/plusIcon.png"></button>\n\t\t\t\n\t\t\t\t<span class="search_bar" id="searchBar">\n\t\t\t\t\t<input type="text" placeholder="Search">\n\t\t\t\t\t<img src="../public/resources/search_icon.png">\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t',this.h1=this.shadowRoot.getElementById("title_page"),this.createFutureLog=this.createFutureLog.bind(this),this.futureLogButton=this.shadowRoot.querySelector(".plus"),this.imgbuttons=this.shadowRoot.querySelectorAll(".imgbutton"),this.menuToggle=this.shadowRoot.querySelector("#menuToggle input"),this.searchBar=this.shadowRoot.getElementById("searchBar")}connectedCallback(){this.futureLogButton.addEventListener("click",(()=>{let t="none"===this.searchBar.style.display?0:this.searchBar.getBoundingClientRect().width;F(this.offsetHeight,window.innerWidth-210-t)})),this.menuToggle.addEventListener("change",(()=>{Et.toggle()})),this.h1.onblur=()=>{var t,e;this.h1.contentEditable&&(qt.title=this.h1.innerText,t=!0,e=t=>{t&&console.log(t)},function(t,e,n){console.log(e),t.get("0000",((o,s)=>{if(!o){let o=s.collections.filter((t=>t.id!==e.id));return o.push(e),s.collections=o,t.put({_id:"0000",_rev:s._rev,email:s.email,pwd:s.pwd,theme:s.theme,index:s.index,dailyLogs:s.dailyLogs,monthlyLogs:s.monthlyLogs,futureLogs:s.futureLogs,collections:s.collections,trackers:s.trackers,imageBlocks:s.imageBlocks,audioBlocks:s.audioBlocks,textBlocks:s.textBlocks,tasks:s.tasks,events:s.events,signifiers:s.signifiers},((t,e)=>{t?n(t):e&&n(null)}))}n(o)}))}(f,qt,(n=>{t&&!n&&b(),e(n)})))}}makeEditable(){this.h1.contentEditable=!0}makeUneditable(){this.h1.contentEditable=!1}set title(t){this.shadowRoot.getElementById("title_page").innerHTML=t}get title(){return this.h1.innerText}createFutureLog(){x(new Date(2021,5,22),new Date(2021,8,23),[],[],[],!0)}}window.customElements.define("page-header",Tt);class It extends HTMLElement{constructor(t,e,n,o){super();let s=document.createElement("template");s.innerHTML='\n\t\t\t<style>\n\t\t\t\t#container{\n\t\t\t\t\theigt: 35px;\n\t\t\t\t}\n\n\t\t\t\t#title{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tborder-bottom: 2px solid rgba(255,255,255,0.4);\n\t\t\t\t\ttransition: 0.2s;\n\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\tline-height: 28px;\n\t\t\t\t\tmargin: 7px 0 12px;\n\t\t\t\t\tvertical-align: top;\n\t\t\t\t}\n\n\t\t\t\t#title:hover{\n\t\t\t\t\tborder-bottom: 2px solid rgba(255,255,255,0.9);\n\t\t\t\t\ttransition: 0.2s;\n\t\t\t\t}\n\n\t\t\t\t#editorIcons{\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline;\n\t\t\t\t\tvertical-align: top;\n\t\t\t\t\ttop: 10px;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#editorIcons img{\n\t\t\t\t\tmargin-right: 7px;\n\t\t\t\t\theight: 15px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tfilter: var(--icon-filter);\n\t\t\t\t}\n\n\t\t\t\t@media screen and (max-width: 700px) {\n\t\t\t\t\t.plus{\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div id="container">\n\t\t\t\t<div id="editorIcons" class="paragraphIcons"><img src="../public/resources/plusIcon.png" class="unfocusedIcons"/><img src="../public/resources/sixDotIcon.png" class="unfocusedIcons"/></div>\n\t\t\t\t<div id="title">Test</div>\n\t\t\t</div>\n\t\t',this.parent=e,this.item=n,this.trackerMenu=o,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(s.content.cloneNode(!0)),this.trackerButton=this.shadowRoot.querySelector(".plus"),this.plusButton=this.shadowRoot.querySelector("#editorIcons img"),this.plusButton=this.shadowRoot.querySelector("#editorIcons img + img"),this.titleSpan=this.shadowRoot.getElementById("title"),this.titleSpan.innerHTML=t}connectedCallback(){this.plusButton.onclick=()=>{this.createTracker()},this.titleSpan.onclick=()=>{this.trackerMenu.clear(),this.trackerMenu.title=this.titleSpan.innerHTML,this.trackerMenu.isInsideTracker=!0,at(this.trackerMenu.shadowRoot.getElementById("editor"),this.item,null,(t=>{t||console.log("Error loading tracker")}))}}createTracker(){L(this.title.innerHTML,[],this.parent,!0,((t,e)=>{t?console.log(t):console.log(e)}))}}window.customElements.define("tracker-block",It);class Dt extends HTMLElement{static get observedAttributes(){return["open"]}constructor(t){super(),this.attachShadow({mode:"open"}),this.close=this.close.bind(this),this.clear=this.clear.bind(this),this.shadowRoot.innerHTML='\n        <style>\n\t\t\t@font-face {\n\t\t\t\tfont-family:"SF-Pro";\n\t\t\t\tsrc: url("./public/fonts/SF-Pro.ttf");\n\t\t\t}\n\n\t\t\ttext-block {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t}\n\n\t\t\ttracker-block{\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t}\n\n\t\t\tcreator-block{\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\twidth: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t}\n\t\t\t\n\t\t\t.noteContainer {\n\t\t\t\tmargin-top: 7px;\n\t\t\t\tmargin-bottom: 7px;\n\t\t\t\tmargin-left: 87px;\n\t\t\t\tdisplay: list-item;\n\t\t\t\tlist-style-type: disc;\n\t\t\t\tlist-style-position: outside;\n\t\t\t}\n\t\t\t\n\t\t\t.eventContainer {\n\t\t\t\tmargin-top: 7px;\n\t\t\t\tmargin-bottom: 7px;\n\t\t\t\tmargin-left: 87px;\n\t\t\t\tdisplay: list-item;\n\t\t\t\tlist-style-type: circle;\n\t\t\t\tlist-style-position: outside;\n\t\t\t}\n\n            .wrapper {\n                display: flex;\n                flex-direction: column;\n                position: fixed;\n                top: 0;\n                right: 0;\n                z-index: 5;\n                width: 40%;\n                min-width: 40ch;\n                height: 100vh;\n                background-color: var(--tracker-background-color); /* #2B2D42 */\n                color: var(--tracker-foreground-color);\n                font-family: "SF-Pro";\n                transition: transform .4s ease-in-out\n            }\n\n            .wrapper.closed {\n                transform: translate3d(100%, 0, 0);\n            }\n                        \n            .wrapper.open {\n                transform: translate3d(0, 0, 0);\n            }\n\n            .tracker_header {\n                display: flex;\n                justify-content: flex-start;\n\n                margin: 0 20px;\n                padding: 0 20px;\n                height: 75px;\n                border-bottom: 2px solid var(--tracker-border-color); /*rgba(157, 148, 241, 0.7);*/\n            }\n            \n            .tracker_header h1 {\n                text-align: center;\n                flex: 1;\n                font-size: 24pt;\n            }\n\n            button {\n                margin: 0;\n                border: none;\n                background-color: rgba(0,0,0,0);\n            }\n\n            .close_button img {\n                filter: invert();\n                opacity: 50%;\n\t\t\t\twidth: 15px;\n\t\t\t\tcursor: pointer;\n            }\n            \n            .close_button:hover img {\n                opacity: 100%;\n            }\n\n            .tracker_menu {\n                overflow-y: auto;\n            }\n            \n            #editor {\n                margin: 20px 20px 0px;\n            }\n\n            @media screen and (max-width: 900px) {\n                .wrapper{\n                    width: 100%;\n                }\n            }\n            </style>\n\n        <div class="wrapper closed">\n            <div class="tracker_header">\n                    <button class="close_button"> <img src="../public/resources/right-chevron.png"> </button>\n                    <h1 class="tracker_h1">Future Log Tracker</h1>\n            </div>\n\n            <div class="tracker_menu"><div id="editor"></div></div>\n        </div>\n        ',this.title=t,this.closeButton=this.shadowRoot.querySelector(".close_button"),this.editor=this.shadowRoot.getElementById("editor"),this.isInsideTracker=!1}attributeChangedCallback(t,e,n){e!==n&&(this[t]=this.hasAttribute(t))}connectedCallback(){this.closeButton.addEventListener("click",(()=>{if(this.isInsideTracker){this.isInsideTracker=!1,this.clear();let t=this.shadowRoot.getElementById("editor");B(((e,n)=>{if(e)console.log(e);else{let e=n.trackers,o=[];for(let t=0;t<qt.trackers.length;t++)console.log("hello"),o.push(e.filter((e=>e.id===qt.trackers[t]))[0]);console.log(o),setTimeout((()=>{for(let e=0;e<o.length;e++){let n=o[e],s=new It(n.title,qt.id,n,this);t.appendChild(s)}t.appendChild(new pt)}),10)}})),"futureLog"===qt.objectType?this.title="Future Log Trackers":"monthlyLog"===qt.objectType?this.title="Monthly Log Trackers":this.title="Daily Log Trackers"}else this.close()}))}toggle(){this.open=!this.open}get open(){return this.hasAttribute("open")}set open(t){this.shadowRoot.querySelector(".wrapper").classList.toggle("open",t),this.shadowRoot.querySelector(".wrapper").classList.toggle("closed",!t),this.shadowRoot.querySelector(".wrapper").setAttribute("aria-hidden",!t),t?(this.setAttribute("open","true"),this.focus()):this.removeAttribute("open")}get title(){return this.shadowRoot.querySelector(".tracker_header h1").innerText}set title(t){this.shadowRoot.querySelector(".tracker_header h1").innerText=t}close(){this.open=!1}clear(){for(;this.editor.childNodes.length>0;)this.editor.childNodes[0].remove()}}window.customElements.define("tracker-menu",Dt),document.querySelector("body").style.display="none";let Et=new At,St=new Tt,Mt=new gt,Ft=new dt("futureLog"),Ct="",Rt=1,qt={},Ht=document.getElementById("contentWrapper");function _t(t){let e="",n=null;null!==t&&(e=t.split("~")),console.log(void 0!==e),void 0!==e&&(n=e[1]),B(((t,e)=>{if(t)window.location.href="http://localhost:8080/login";else if(null==n)qt=e.index;else{let t=[];Array.prototype.push.apply(t,e.dailyLogs),Array.prototype.push.apply(t,e.monthlyLogs),Array.prototype.push.apply(t,e.futureLogs),Array.prototype.push.apply(t,e.collections);let o=t.filter((t=>t.id===n));qt=o[0]}}))}function Pt(t){B(((t,e)=>{if(t)console.log(t);else{console.log(e.futureLogs);let t=[];Array.prototype.push.apply(t,e.futureLogs),Array.prototype.push.apply(t,e.collections);let n=[];console.log(qt);for(let e=0;e<qt.contents.length;e++)Array.prototype.push.apply(n,t.filter((t=>t.id===qt.contents[e])));let o=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let t=0;t<n.length;t++)if(console.log("inside for loop"),"futureLog"===n[t].objectType){let s=new Date(n[t].startDate),i=new Date(n[t].endDate),r=new _(`Future Log ${o[s.getMonth()]} ${s.getFullYear()} - ${o[i.getMonth()]} ${i.getFullYear()}`,n[t],1);Ht.appendChild(r),t>0&&r.titleWrapper.classList.add("singleItemWrapper");for(let s=0;s<n[t].months.length;s++){let i=e.monthlyLogs.filter((e=>e.id===n[t].months[s].monthlyLog))[0];console.log(i),console.log(e);let l=new _(`${o[new Date(i.date).getMonth()]} ${new Date(i.date).getFullYear()}`,i,2);r.contentWrapper.appendChild(l);for(let t=0;t<i.days.length;t++){let n=e.dailyLogs.filter((e=>e.id===i.days[t].dailyLog))[0],s=new _(`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(n.date).getDay()]}, ${o[new Date(n.date).getMonth()]} ${new Date(n.date).getUTCDate()}`,n,3);l.contentWrapper.appendChild(s)}}}else{let e=n[t],o=new _(e.title,e,1);Ht.appendChild(o),t>0&&o.titleWrapper.classList.add("singleItemWrapper")}Ht.appendChild(new pt)}})),console.log("we are here"),St.title="Index",Ct="/",Rt=1;for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].style.visibility="visible";document.getElementById("targetMenu").style.display="none",Et.target.setAttribute("disabled","disabled"),Et.target.style.visibility="hidden",Et.single.setAttribute("disabled","disabled"),Et.single.style.visibility="hidden",Et.double.setAttribute("disabled","disabled"),Et.double.style.visibility="hidden",Et.singleMenu.setAttribute("disabled","disabled"),Et.singleMenu.style.visibility="hidden",Et.doubleMenu.setAttribute("disabled","disabled"),Et.doubleMenu.style.visibility="hidden",St.makeUneditable();let e=St.imgbuttons;for(let t=0;t<e.length;t++)e[t].classList.contains("plus")||e[t].classList.add("hide")}function Nt(t,e){B(((t,e)=>{if(t)console.log(t);else{let t=e.monthlyLogs;console.log(qt);let n=[];for(let e=0;e<qt.months.length;e++)Array.prototype.push.apply(n,t.filter((t=>t.id===qt.months[e].monthlyLog)));let o=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let t=0;t<n.length;t++){let s=n[t],i=new _(`${o[new Date(s.date).getMonth()]} ${new Date(s.date).getFullYear()}`,s,1);Ht.appendChild(i),t>0&&i.titleWrapper.classList.add("singleItemWrapper"),at(i.contentWrapper,qt,s.id,(()=>{for(let t=0;t<s.days.length;t++){let n=e.dailyLogs.filter((e=>e.id===s.days[t].dailyLog))[0],r=new _(`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(n.date).getDay()]}, ${o[new Date(n.date).getMonth()]} ${new Date(n.date).getUTCDate()}`,n,2);i.contentWrapper.appendChild(r),at(r.contentWrapper,s,n.id,(()=>{}))}}))}Ht.appendChild(new pt)}})),document.getElementById("targetMenu").style.display="block";let n=new Date(qt.startDate),o=new Date(qt.endDate);St.title=o.getFullYear()===n.getFullYear()?`Future Log ${n.getFullYear()}`:`Future Log ${n.getFullYear()} - ${o.getFullYear()}`,Rt=4,Ct=e;for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].style.visibility="visible";Et.single.setAttribute("disabled","disabled"),Et.single.style.visibility="hidden",Et.double.setAttribute("disabled","disabled"),Et.double.style.visibility="hidden",Et.singleMenu.setAttribute("disabled","disabled"),Et.singleMenu.style.visibility="hidden",Et.doubleMenu.setAttribute("disabled","disabled"),Et.doubleMenu.style.visibility="hidden",St.makeUneditable();let s=St.imgbuttons;for(let t=0;t<s.length;t++)s[t].classList.remove("hide");let i=new Dt("Future Log Trackers");document.getElementById("trackerWrapper").appendChild(i);let r=i.shadowRoot.getElementById("editor");B(((t,e)=>{if(t)console.log(t);else{let t=e.trackers,n=[];for(let e=0;e<qt.trackers.length;e++)n.push(t.filter((t=>t.id===qt.trackers[e]))[0]);console.log(n),setTimeout((()=>{for(let t=0;t<n.length;t++){let e=n[t],o=new It(e.title,qt.id,e,i);r.appendChild(o)}r.appendChild(new pt)}),10)}}))}function jt(t,e){B(((t,e)=>{if(t)console.log(t);else{let t=e.dailyLogs,n=[];for(let e=0;e<qt.days.length;e++)Array.prototype.push.apply(n,t.filter((t=>t.id===qt.days[e].dailyLog)));let o=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(let t=0;t<qt.days.length;t++){let e=n[t],i=new _(`${s[new Date(e.date).getDay()]}, ${o[new Date(e.date).getMonth()]} ${new Date(e.date).getUTCDate()}`,e,1);Ht.appendChild(i),t>0&&i.titleWrapper.classList.add("singleItemWrapper"),at(i.contentWrapper,qt,e.id,(()=>{}))}Ht.appendChild(new pt)}})),St.title=`${["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(qt.date).getMonth()]} ${new Date(qt.date).getFullYear()}`,Rt=3,Ct=e;for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].style.visibility="visible";document.getElementById("targetMenu").style.display="block",Et.double.setAttribute("disabled","disabled"),Et.double.style.visibility="hidden",Et.doubleMenu.setAttribute("disabled","disabled"),Et.doubleMenu.style.visibility="hidden",St.makeUneditable();let n=St.imgbuttons;for(let t=0;t<n.length;t++)n[t].classList.remove("hide");let o=new Dt("Monthly Log Trackers");document.getElementById("trackerWrapper").appendChild(o);let s=o.shadowRoot.getElementById("editor");B(((t,e)=>{if(t)console.log(t);else{let t=e.trackers,n=[];for(let e=0;e<qt.trackers.length;e++)n.push(t.filter((t=>t.id===qt.trackers[e]))[0]);setTimeout((()=>{for(let t=0;t<n.length;t++){let e=n[t],i=new It(e.title,qt.id,e,o);s.appendChild(i)}s.appendChild(new pt)}),10)}}))}function $t(t,e){St.title=`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(qt.date).getDay()]} ${["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(qt.date).getMonth()]} ${new Date(qt.date).getUTCDate()}, ${new Date(qt.date).getFullYear()}`,Rt=2,Ct=e;for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].style.visibility="visible";at(Ht,qt,null,(t=>{console.log(t)})),document.getElementById("targetMenu").style.display="block",St.makeUneditable();let n=St.imgbuttons;for(let t=0;t<n.length;t++)n[t].classList.remove("hide");let o=new Dt("Daily Log Trackers");document.getElementById("trackerWrapper").appendChild(o);let s=o.shadowRoot.getElementById("editor");B(((t,e)=>{if(t)console.log(t);else{let t=e.trackers,n=[];for(let e=0;e<qt.trackers.length;e++)console.log("hello"),n.push(t.filter((t=>t.id===qt.trackers[e]))[0]);console.log(n),setTimeout((()=>{for(let t=0;t<n.length;t++){let e=n[t],o=new It(e.title,qt.id,1);s.appendChild(o)}at(s,null,null,(t=>{console.log(t)}))}),10)}}))}function Wt(t,e){St.title=qt.title,Rt=5,Ct=e;for(let e=0;e<t.length;e++)t[e].removeAttribute("disabled"),t[e].style.visibility="visible";at(Ht,qt,null,(t=>{console.log(t)})),Et.single.setAttribute("disabled","disabled"),Et.single.style.visibility="hidden",Et.double.setAttribute("disabled","disabled"),Et.double.style.visibility="hidden",Et.singleMenu.setAttribute("disabled","disabled"),Et.singleMenu.style.visibility="hidden",Et.doubleMenu.setAttribute("disabled","disabled"),Et.doubleMenu.style.visibility="hidden",St.makeEditable();let n=St.imgbuttons;for(let t=0;t<n.length;t++)n[t].classList.remove("hide")}document.getElementById("adderDropdown").appendChild(Mt),document.getElementById("creationMenu").appendChild(Ft),document.getElementById("topbar").appendChild(St),document.getElementById("sidebar").appendChild(Et),document.getElementById("targetMenu").onclick=()=>{Et.toggleTracker()},q.setState(document.location.hash,!1),window.onpopstate=()=>{q.setState(document.location.hash,!0)}})();