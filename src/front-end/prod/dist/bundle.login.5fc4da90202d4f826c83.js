(()=>{"use strict";let e="https://boojo.bitfrost.app/api",o="https://boojo.bitfrost.app";function t(e,o,t){e.put({_id:"0000",email:o.email,pwd:o.pwd,theme:o.theme,index:o.index,dailyLogs:o.dailyLogs,monthlyLogs:o.monthlyLogs,futureLogs:o.futureLogs,collections:o.collections,trackers:o.trackers,imageBlocks:o.imageBlocks,audioBlocks:o.audioBlocks,textBlocks:o.textBlocks,tasks:o.tasks,events:o.events,signifiers:o.signifiers}).then((e=>{e.ok&&t(o)})).catch((e=>{t(e)}))}let l=new PouchDB("Users"),n=document.getElementById("email-field"),i=document.getElementById("password-field"),r=document.getElementById("login-form-submit"),a=document.getElementById("login-form-create");var s;s=(e,o)=>{e?console.log(o):window.location.href=origin},function(e,o){e.get("0000",((e,t)=>{e?o(e,null):o(null,t)}))}(l,((e,o)=>{s(e,o)})),document.onsubmit=e=>{console.log(e),e.preventDefault()},r.onclick=r=>{r.preventDefault(),""===n.value?alert("You need to fill in the email field"):""===i.value?alert("You need to fill in the password field"):function(n,r,a){fetch(`${e}/readUser`,{headers:{"content-type":"application/json; charset=UTF-8",Origin:o},body:JSON.stringify({email:n,pwd:r}),method:"POST"}).then((e=>e.json())).then((e=>{var o;void 0!==(o=e).error?alert(o.error):void 0===o.email?alert("Wrong username or password"):(o.pwd=i.value,console.log(o.index),t(l,o,(e=>{console.log(e),window.location.href="/"})))}))}(n.value,i.value)},a.onclick=r=>{r.preventDefault(),""===n.value?alert("You need to fill in the email field"):""===i.value?alert("You need to fill in the password field"):function(n,i,r){fetch(`${e}/createUser`,{headers:{"content-type":"application/json; charset=UTF-8",Origin:o},body:JSON.stringify({email:n,pwd:i}),method:"POST"}).then((e=>e.json())).then((e=>{e.error?r(e):(e.pwd=i,t(l,e,(e=>{r(e)})))}))}(n.value,i.value,(e=>{void 0!==e.error?alert(e.error):void 0===e.email?alert("Wrong username or password"):(e.pwd=i.value,t(l,e,(e=>{console.log(e),window.location.href="/"})))}))}})();