(()=>{"use strict";function e(e,o,t){e.put({_id:"0000",email:o.email,pwd:o.pwd,theme:o.theme,index:o.index,dailyLogs:o.dailyLogs,monthlyLogs:o.monthlyLogs,futureLogs:o.futureLogs,collections:o.collections,trackers:o.trackers,imageBlocks:o.imageBlocks,audioBlocks:o.audioBlocks,textBlocks:o.textBlocks,tasks:o.tasks,events:o.events,signifiers:o.signifiers}).then((e=>{e.ok&&t(o)})).catch((e=>{t(e)}))}let o=new PouchDB("Users"),t=document.getElementById("email-field"),l=document.getElementById("password-field"),n=document.getElementById("login-form-submit"),i=document.getElementById("login-form-create");var r;r=(e,o)=>{e?console.log(o):window.location.href=origin},function(e,o){e.get("0000",((e,t)=>{e?o(e,null):o(null,t)}))}(o,((e,o)=>{console.log(e),console.log(o),r(e,o)})),document.onsubmit=e=>{console.log(e),e.preventDefault()},n.onclick=n=>{n.preventDefault(),""===t.value?alert("You need to fill in the email field"):""===l.value?alert("You need to fill in the password field"):function(t,n,i){fetch(`${api}/readUser`,{headers:{"content-type":"application/json; charset=UTF-8",Origin:origin},body:JSON.stringify({email:t,pwd:n}),method:"POST"}).then((e=>e.json())).then((t=>{var n;void 0!==(n=t).error?alert(n.error):void 0===n.email?alert("Wrong username or password"):(n.pwd=l.value,console.log(n.index),e(o,n,(e=>{console.log(e),window.location.href="/"})))}))}(t.value,l.value)},i.onclick=n=>{n.preventDefault(),""===t.value?alert("You need to fill in the email field"):""===l.value?alert("You need to fill in the password field"):function(t,l,n){fetch(`${api}/createUser`,{headers:{"content-type":"application/json; charset=UTF-8",Origin:origin},body:JSON.stringify({email:t,pwd:l}),method:"POST"}).then((e=>e.json())).then((t=>{t.error?n(t):(t.pwd=l,e(o,t,(e=>{n(e)})))}))}(t.value,l.value,(t=>{void 0!==t.error?alert(t.error):void 0===t.email?alert("Wrong username or password"):(t.pwd=l.value,e(o,t,(e=>{console.log(e),window.location.href="/"})))}))}})();